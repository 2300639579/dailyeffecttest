{"version":3,"sources":["webpack:///webpack/bootstrap 687b62d4da3c5f9fdb9a","webpack:///./src/js/game/actor.js","webpack:///./src/js/view/dom-view/widget.js","webpack:///./src/images/selected.png","webpack:///./src/js/game/stage.js","webpack:///./src/js/global-data.js","webpack:///./src/js/view/dom-view/page.js","webpack:///./src/css/ziti.eot","webpack:///./src/images/bg.jpg","webpack:///./src/images/black-piece.png","webpack:///./src/images/white-piece.png","webpack:///./src/js/game/play/player-actor.js","webpack:///./src/js/game/game.js","webpack:///./src/js/view/dom-view/view.js","webpack:///./src/css/style.scss","webpack:///./~/css-loader/lib/css-base.js","webpack:///./src/css/ziti.svg","webpack:///./src/css/ziti.ttf","webpack:///./src/css/ziti.woff","webpack:///./src/images/avatar-1-1-lose.png","webpack:///./src/images/avatar-1-1-playing.png","webpack:///./src/images/avatar-1-1-wait.png","webpack:///./src/images/avatar-1-1-win.png","webpack:///./src/images/avatar-1-1.png","webpack:///./src/images/avatar-1-2-lose.png","webpack:///./src/images/avatar-1-2-playing.png","webpack:///./src/images/avatar-1-2-wait.png","webpack:///./src/images/avatar-1-2-win.png","webpack:///./src/images/avatar-1-2.png","webpack:///./src/images/avatar-2-1-lose.png","webpack:///./src/images/avatar-2-1-playing.png","webpack:///./src/images/avatar-2-1-wait.png","webpack:///./src/images/avatar-2-1-win.png","webpack:///./src/images/avatar-2-1.png","webpack:///./src/images/avatar-2-2-lose.png","webpack:///./src/images/avatar-2-2-playing.png","webpack:///./src/images/avatar-2-2-wait.png","webpack:///./src/images/avatar-2-2-win.png","webpack:///./src/images/avatar-2-2.png","webpack:///./src/images/avatar-robot.png","webpack:///./src/images/back.png","webpack:///./src/images/bg-1.jpg","webpack:///./src/images/black-hover.png","webpack:///./src/images/qipan.png","webpack:///./src/images/white-hover.png","webpack:///./~/style-loader/addStyles.js","webpack:///./src/css/style.scss?9c21","webpack:///./src/js/common.js","webpack:///./src/js/game/avatar/avatar-stage.js","webpack:///./src/js/game/avatar/avatarselector-actor.js","webpack:///./src/js/game/gate/gate-stage.js","webpack:///./src/js/game/gate/setting-actor.js","webpack:///./src/js/game/play/chessboard-actor.js","webpack:///./src/js/game/play/controler-actor.js","webpack:///./src/js/game/play/play-stage.js","webpack:///./src/js/game/play/robot-actor.js","webpack:///./src/js/game/play/timekeeper-actor.js","webpack:///./src/js/main.js","webpack:///./src/js/msg-map.js","webpack:///./src/js/view/base-view/page.js","webpack:///./src/js/view/base-view/view.js","webpack:///./src/js/view/base-view/widget.js","webpack:///./src/js/view/dom-view/avatar/avatar-page.js","webpack:///./src/js/view/dom-view/avatar/avatarselector-widget.js","webpack:///./src/js/view/dom-view/gate/gate-page.js","webpack:///./src/js/view/dom-view/gate/setting-widget.js","webpack:///./src/js/view/dom-view/play/chessboard-widget.js","webpack:///./src/js/view/dom-view/play/controler-widget.js","webpack:///./src/js/view/dom-view/play/play-page.js","webpack:///./src/js/view/dom-view/play/player-widget.js","webpack:///./src/js/view/dom-view/play/timekeeper-widget.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;AChEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;;AC3DA;;AAEA;;AAEA,C;;;;;;;;ACJA,mE;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4B;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,C;;;;;;;;;;ACjGA;AAAA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD;AACA;;AAEA;AACA;AACA;;;;;;;;;;AClBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;ACbA,4D;;;;;;ACAA,6D;;;;;;ACAA,sE;;;;;;ACAA,sE;;;;;;;;ACAA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kD;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,0D;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,uCAAuC,wCAAwC;AAC/E;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,C;;;;;;;;;;;;;AC/FmB;AACnB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,uBAAuB;AACvB;;AAEA;AACA;AACA;AACA;AACA,mCAAmC,sBAAsB,EAAE;;AAE3D,kCAAkC;;AAElC;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA,+D;;;;;;;;;;;;;ACvDA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,sBAAsB;AACtB;AACA,C;;;;;;;;ACrBA;AACA;;;AAGA;AACA,iSAAkS,cAAc,eAAe,EAAE,iGAAiG,mBAAmB,wBAAwB,uBAAuB,EAAE,sBAAsB,iBAAiB,EAAE,iBAAiB,qBAAqB,EAAE,WAAW,8BAA8B,sBAAsB,EAAE,8EAA8E,mBAAmB,EAAE,qBAAqB,cAAc,eAAe,EAAE,gBAAgB,gBAAgB,iBAAiB,uBAAuB,EAAE,UAAU,2BAA2B,EAAE,YAAY,gBAAgB,EAAE,cAAc,gBAAgB,mBAAmB,cAAc,eAAe,cAAc,qBAAqB,mBAAmB,EAAE,gBAAgB,YAAY,EAAE,sBAAsB,iBAAiB,mBAAmB,cAAc,gBAAgB,uBAAuB,EAAE,SAAS,cAAc,EAAE,OAAO,0BAA0B,mBAAmB,EAAE,aAAa,oBAAoB,EAAE,OAAO,uBAAuB,EAAE,YAAY,qBAAqB,EAAE,UAAU,qCAAqC,mBAAmB,EAAE,uCAAuC,kBAAkB,mBAAmB,gBAAgB,gBAAgB,uBAAuB,EAAE,eAAe,aAAa,EAAE,SAAS,gBAAgB,EAAE,SAAS,iBAAiB,EAAE,UAAU,iBAAiB,EAAE,gBAAgB,gBAAgB,EAAE,iBAAiB,gBAAgB,EAAE,sBAAsB,gBAAgB,EAAE,gBAAgB,0BAA0B,6CAA4C,4QAAsQ,yCAAyC,wBAAwB,EAAE,UAAU,0BAA0B,oBAAoB,gBAAgB,EAAE,gBAAgB,kBAAkB,kBAAkB,qBAAqB,+DAAqE,0BAA0B,EAAE,UAAU,gCAAgC,iCAAiC,0BAA0B,EAAE,UAAU,0BAA0B,oBAAoB,kBAAkB,2BAA2B,EAAE,cAAc,oBAAoB,EAAE,WAAW,8BAA8B,EAAE,WAAW,kBAAkB,uBAAuB,gBAAgB,iBAAiB,EAAE,gBAAgB,mBAAmB,EAAE,iBAAiB,2DAAuE,EAAE,iBAAiB,2DAAuE,EAAE,iBAAiB,2DAAuE,EAAE,iBAAiB,2DAAuE,EAAE,mBAAmB,2DAAyE,EAAE,gBAAgB,oBAAoB,uBAAuB,EAAE,4BAA4B,kBAAkB,eAAe,mBAAmB,kCAAkC,kBAAkB,yCAAyC,EAAE,sBAAsB,qBAAqB,EAAE,qBAAqB,uBAAuB,0BAA0B,iBAAiB,kBAAkB,iBAAiB,EAAE,oCAAoC,yBAAyB,eAAe,gBAAgB,kBAAkB,wBAAwB,uCAAuC,qBAAqB,kBAAkB,uEAAkF,4BAA4B,EAAE,wBAAwB,iBAAiB,qBAAqB,uBAAuB,EAAE,wBAAwB,6BAA6B,EAAE,2BAA2B,sBAAsB,oBAAoB,EAAE,oBAAoB,iBAAiB,kBAAkB,EAAE,4BAA4B,kBAAkB,yBAAyB,mBAAmB,mBAAmB,wBAAwB,mBAAmB,yBAAyB,EAAE,6CAA6C,2BAA2B,iBAAiB,kBAAkB,oBAAoB,0BAA0B,yCAAyC,uBAAuB,oBAAoB,yEAAoF,8BAA8B,EAAE,iBAAiB,uBAAuB,cAAc,eAAe,gBAAgB,iBAAiB,2DAAiE,EAAE,oBAAoB,kBAAkB,uBAAuB,WAAW,YAAY,iBAAiB,gBAAgB,iBAAiB,mCAAmC,EAAE,iCAAiC,mBAAmB,oBAAoB,yBAAyB,gBAAgB,eAAe,uCAAuC,oBAAoB,2BAA2B,iDAAiD,4DAAiE,EAAE,gDAAgD,wBAAwB,4BAA4B,EAAE,mDAAmD,sBAAsB,EAAE,kEAAkE,uBAAuB,0BAA0B,uBAAuB,0BAA0B,EAAE,uBAAuB,uBAAuB,cAAc,YAAY,kCAAkC,kBAAkB,oBAAoB,iBAAiB,kBAAkB,sEAA6E,0BAA0B,EAAE,+BAA+B,kBAAkB,mBAAmB,sBAAsB,EAAE,8DAA8D,qCAAqC,oCAAoC,8BAA8B,EAAE,mCAAmC,uBAAuB,oBAAoB,qBAAqB,EAAE,yCAAyC,8DAA4E,EAAE,yCAAyC,8DAA4E,EAAE,mDAAmD,6DAA0E,EAAE,mDAAmD,6DAA0E,EAAE,6JAA6J,kCAAkC,0BAA0B,EAAE,iBAAiB,kBAAkB,kCAAkC,sBAAsB,EAAE,6BAA6B,sBAAsB,EAAE,mBAAmB,eAAe,iBAAiB,2BAA2B,iCAAiC,EAAE,2BAA2B,mBAAmB,oBAAoB,wBAAwB,4BAA4B,EAAE,0BAA0B,yBAAyB,mBAAmB,oBAAoB,qBAAqB,EAAE,kCAAkC,8DAA4E,EAAE,kCAAkC,8DAA4E,EAAE,kCAAkC,2BAA2B,iBAAiB,kBAAkB,oBAAoB,0BAA0B,yCAAyC,uBAAuB,oBAAoB,yEAAoF,8BAA8B,mBAAmB,iCAAiC,EAAE,wCAAwC,iBAAiB,EAAE,2BAA2B,kBAAkB,EAAE,2BAA2B,mBAAmB,EAAE,kCAAkC,yBAAyB,EAAE,+BAA+B,sBAAsB,EAAE,0CAA0C,qBAAqB,4BAA4B,EAAE,uCAAuC,6DAAiF,EAAE,uCAAuC,6DAAiF,EAAE,uCAAuC,6DAAiF,EAAE,uCAAuC,6DAAiF,EAAE,oCAAoC,6DAA8E,EAAE,oCAAoC,6DAA8E,EAAE,oCAAoC,6DAA8E,EAAE,oCAAoC,6DAA8E,EAAE,oCAAoC,6DAA8E,EAAE,oCAAoC,6DAA8E,EAAE,oCAAoC,6DAA8E,EAAE,oCAAoC,6DAA8E,EAAE,mCAAmC,6DAA6E,EAAE,mCAAmC,6DAA6E,EAAE,mCAAmC,6DAA6E,EAAE,mCAAmC,6DAA6E,EAAE,qBAAqB,kBAAkB,uBAAuB,WAAW,YAAY,iBAAiB,gBAAgB,iBAAiB,mCAAmC,EAAE,mCAAmC,mBAAmB,oBAAoB,yBAAyB,gBAAgB,eAAe,uCAAuC,4DAAiE,oBAAoB,2BAA2B,iDAAiD,EAAE,mDAAmD,wBAAwB,4BAA4B,EAAE,oEAAoE,qBAAqB,wBAAwB,qBAAqB,wBAAwB,EAAE;;AAE/kW;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,iBAAiB;AACjC;AACA;AACA,wCAAwC,gBAAgB;AACxD,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA,YAAY,oBAAoB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACjDA,4D;;;;;;ACAA,4D;;;;;;ACAA,6D;;;;;;ACAA,0E;;;;;;ACAA,6E;;;;;;ACAA,0E;;;;;;ACAA,yE;;;;;;ACAA,qE;;;;;;ACAA,0E;;;;;;ACAA,6E;;;;;;ACAA,0E;;;;;;ACAA,yE;;;;;;ACAA,qE;;;;;;ACAA,0E;;;;;;ACAA,6E;;;;;;ACAA,0E;;;;;;ACAA,yE;;;;;;ACAA,qE;;;;;;ACAA,0E;;;;;;ACAA,6E;;;;;;ACAA,0E;;;;;;ACAA,yE;;;;;;ACAA,qE;;;;;;ACAA,uE;;;;;;ACAA,+D;;;;;;ACAA,+D;;;;;;ACAA,sE;;;;;;ACAA,gE;;;;;;ACAA,sE;;;;;;ACAA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,gBAAgB,mBAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,sBAAsB;AACtC;AACA;AACA,kBAAkB,2BAA2B;AAC7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe,mBAAmB;AAClC;AACA;AACA;AACA;AACA,iBAAiB,2BAA2B;AAC5C;AACA;AACA,QAAQ,uBAAuB;AAC/B;AACA;AACA,GAAG;AACH;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA,gCAAgC,sBAAsB;AACtD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD;AACvD;;AAEA,6BAA6B,mBAAmB;;AAEhD;;AAEA;;AAEA;AACA;AACA;;;;;;;ACrPA;;AAEA;AACA;AACA;AACA;AACA,gDAAiF;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,gCAAgC,UAAU,EAAE;AAC5C,C;;;;;;;ACpBA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,yCAAyC,QAAQ;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AAAA;AAAA;;;;;;;;;;;AC7BmB;AACnB;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,C;;;;;;;;;;ACxCA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,C;;;;;;;;;;;ACrBA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,C;;;;;;;;;;AClCA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;;ACjCA;;;AAGA;AACA;AACA;AACA,6BAA6B;AAC7B,2BAA2B;AAC3B;AACA;AACA,SAAS;;AAET;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA,aAAa;;AAEb;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,IAAI;AACjB,aAAa,IAAI;AACjB,aAAa,UAAU;AACvB,aAAa,SAAS;AACtB;;AAEA;AACA;;AAEA,qBAAqB;AACrB;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA,sBAAsB,uBAAuB;AAC7C;AACA;;AAEA;AACA,4BAA4B,wCAAwC;;AAEpE;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,C;;;;;;;;;;AC7JA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,aAAa;;AAEb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,C;;;;;;;;;;;;;;;;;AC3CmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,0BAA0B;AAC1B;;AAEA,6BAA6B;AAC7B,4BAA4B;AAC5B;AACA,0BAA0B;;AAE1B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iCAAiC,gGAAoC;AACrE,mCAAmC,YAAY;AAC/C;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;;AAEA;AACA,kC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;;AAEA;AACA;AACA;AACA,kCAAkC;;AAElC;AACA;AACA;AACA,iBAAiB;AACjB,iCAAiC,qFAAyB,WAAW,0GAA8C;AACnH;AACA;;AAEA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;;AAEA,qCAAqC;AACrC;AACA;AACA;AACA,mCAAmC,YAAY;AAC/C;AACA,kCAAkC;;AAElC;AACA;AACA;AACA,iBAAiB;AACjB,iCAAiC,qFAAyB,WAAW,0GAA8C;AACnH;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA,6BAA6B,qFAAyB;AACtD,+BAA+B,YAAY;AAC3C,aAAa;;AAEb;AACA;AACA;AACA;AACA,+BAA+B,YAAY;AAC3C,aAAa;;AAEb;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;;AAEA;AACA,0CAA0C;AAC1C;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;AAKA,C;;;;;;;;;;AC5OA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,uBAAuB,2BAA2B;AAClD,2BAA2B,8BAA8B;AACzD;AACA,uCAAuC,IAAI;AAC3C;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,C;;;;;;;;;;AClEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,kBAAkB,UAAU,KAAK,UAAU;AAC3C;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,SAAS;AACT;;AAEA;AACA;AACA;;AAEA,C;;;;;;;;;;;;ACtGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,a;;;;;;;ACRA;AACA;AACA;AACA;AACA,iE;;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,C;;;;;;;;;ACzCA;AACA;AACA;AACA;AACA,YAAY;AACZ,C;;;;;;;;;;ACLqB;;AAErB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,wDAAwD;AACxD,wDAAwD;AACxD,SAAS;;AAET;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,kDAAkD,4BAA4B;AAC9E;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,C;;;;;;;;;;;AClDA;AACA;;AAEA;;AAEA;AACA,gBAAgB;AAChB;;AAEA,C;;;;;;;;;;ACTA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,kD;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;;AAET;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;;;AAGT;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA,C;;;;;;;;;;;AClDA;AACA;;AAEA;AACA;AACA,gBAAgB;AAChB,K;AACA,C;;;;;;;;;;ACPA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,gD;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;;AAET;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AAAA;AAAA;;;;;;;;;AChDA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA,iCAAiC,kBAAkB,GAAG,sBAAsB;AAC5E,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA,a;;AAEA;AACA;;AAEA;AACA;AACA;AACA,0CAA0C,yBAAyB;AACnE,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,C;;;;;;;;;;ACjEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,SAAS;;AAET;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,C;;;;;;;;;;;;;;AC3EA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,K;AACA,C;;;;;;;;;;AChBA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;AACT,K;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;;AAEA,C;;;;;;;;;;ACzFA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,yBAAyB,6CAA6C;AACtE,0BAA0B,+CAA+C;AACzE;AACA;AACA;AACA;AACA;;AAEA,C","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 56);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 687b62d4da3c5f9fdb9a","export default class Actor {\r\n    constructor(stage, widget) {\r\n        this.stage = stage;\r\n        this.widget = widget;\r\n        this.widgetData;\r\n        this.resetData;\r\n        this.stageBroadcastHandlers = this.handleStageBoardcast();\r\n        this.widgetEventHandlers = this.handleWidgetEvent();\r\n    }\r\n\r\n    init() {\r\n        for (let eventName in this.widgetEventHandlers) {\r\n            this.widget.addEventListener(eventName, this.widgetEventHandlers[eventName]);\r\n        }\r\n    }\r\n\r\n    initWidget() {\r\n        this.widget.init();\r\n    }\r\n\r\n    handleStageBoardcast() {\r\n        // 重写此方法，返回包含多个消息处理函数的对象，用于处理 stage 对 actor 发出的消息\r\n        return {};\r\n    }\r\n\r\n\r\n    handleWidgetEvent() {\r\n        // 处理 widget 交互事件\r\n        return {}\r\n    }\r\n\r\n    // 向 stage 发送消息\r\n    dispatch() {\r\n        let args = [...arguments];\r\n        let msg = args.shift();\r\n\r\n        this.stage.actorDispatchHandlers[msg] && this.stage.actorDispatchHandlers[msg](...args);\r\n    }\r\n\r\n    makeWidgetData(actorResetData) {\r\n        // 重置 actor 时，需要重置它所使用的 widget, 这里返回的对象，就是用来记录一些 widget 初始状态的数据\r\n        return actorResetData;\r\n    }\r\n\r\n    reset(actorResetData) {\r\n        this.resetData = actorResetData;\r\n        // 重置，在 stage 离开时，需要重置持久(生命周期与stage想同)的 actor\r\n        this.widgetData = this.makeWidgetData(actorResetData);\r\n        this.widget.setData(this.widgetData);\r\n        this.widget.reset();\r\n    }\r\n\r\n    distory() {\r\n        this.widget.distory();\r\n        this.stage.removeActor(this);\r\n        this.stage = null;\r\n        this.widget = null\r\n        this.widgetData = null;\r\n    }\r\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/game/actor.js\n// module id = 0\n// module chunks = 0","import BaseWidget from '../base-view/widget.js'\r\n\r\nexport default class Widget extends BaseWidget {\r\n\r\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/view/dom-view/widget.js\n// module id = 1\n// module chunks = 0","module.exports = __webpack_public_path__ + \"src/images/selected.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/images/selected.png\n// module id = 2\n// module chunks = 0","export default class Stage {\r\n    constructor(game, view) {\r\n        this.game = game;\r\n        this.view = view;\r\n        this.isInit = false;\r\n        this.active = false;\r\n        this.activateData;\r\n\r\n        this.actors = [];\r\n        this.actorDispatchHandlers = this.handleActorDispatch();\r\n        this.actorFactory;\r\n    }\r\n\r\n    init() {\r\n\r\n        let ActorConstructors = this.createActorConstructors();\r\n        this.actorFactory = {\r\n            constructors: ActorConstructors,\r\n            getActor: (name)=>{\r\n                // console.log(name);\r\n                return ( new ActorConstructors[name](this, this.view.createWidget(name)) );\r\n            }\r\n        }\r\n    }\r\n\r\n    createActorConstructors() {\r\n        // 重写此方法，返回包含本 stage 要用到的所有 Actor 构造函数，用于按需创建 actor\r\n    }\r\n\r\n    createActor(name, ...initArgs) {\r\n        // 创建舞台演员\r\n        let actor = this.actorFactory.getActor(name);\r\n\r\n        actor.name = name;\r\n        actor.id = 'actor_' + (new Date).getTime() + (Math.random() * 1000000)|0;\r\n        this.actors.push(actor);\r\n        actor.init(...initArgs);\r\n        actor.initWidget();\r\n\r\n        return actor;\r\n    }\r\n\r\n    removeActor(actor) {\r\n        this.actors.splice(this.actors.indexOf(actor), 1);\r\n    }\r\n\r\n\r\n    handleActorDispatch() {\r\n        // 重写此方法，返回包含多个消息处理函数的对象，用于处理 actor 对 stage 发出的消息\r\n        return {};\r\n    }\r\n\r\n    // 向当前 stage 所有的 actor 发送消息\r\n    broadcast() {\r\n        let args = [...arguments];\r\n        let msg = args.shift();\r\n        this.actors.forEach(\r\n            a=>a.stageBroadcastHandlers[msg] && a.stageBroadcastHandlers[msg](...args)\r\n        );\r\n    }\r\n\r\n    getActorResetDatas(activateData) {\r\n        return {};\r\n    }\r\n\r\n    _activate(data) {\r\n        this.active = true;\r\n        // 首次激活需要初始化\r\n        if (!this.isInit) {\r\n            this.isInit = true;\r\n            this.view.init();\r\n            this.init();\r\n            // return false; \r\n        }\r\n        this.activateData = data;\r\n\r\n        let actorResetDatas = this.getActorResetDatas(this.activateData);\r\n\r\n        this.actors.forEach(w=>w.reset(actorResetDatas[w.name]));\r\n        this.activate(data);\r\n        this.view && this.view.show();\r\n    }\r\n\r\n    activate() {\r\n        // 重写此方法，激活之后的操作，在视图显示之前\r\n    }\r\n\r\n    _inactivate() {\r\n        this.active = false;\r\n        this.view && this.view.hide();\r\n\r\n        this.inactivate();\r\n    }\r\n\r\n    inactivate() {\r\n        // 重写此方法，离开之后的操作，在视图消失之后\r\n    }\r\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/game/stage.js\n// module id = 3\n// module chunks = 0","var globalData;\r\nvar initData = {\r\n    player1: {\r\n        avatar: null,\r\n    },\r\n    player2: {\r\n        avatar: null,\r\n    }\r\n};\r\n\r\nif (window.localStorage.gobang) {\r\n    globalData = window.localStorage.gobang;\r\n} else {\r\n    clearGlobalData();\r\n}\r\n\r\nfunction clearGlobalData() {\r\n    globalData = JSON.parse(JSON.stringify(initData));\r\n}\r\n\r\nexport {globalData, clearGlobalData};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/global-data.js\n// module id = 4\n// module chunks = 0","import BasePage from '../base-view/page.js'\r\n\r\nexport default class Page extends BasePage {\r\n    constructor(elem) {\r\n        super();\r\n        this.elem = elem;\r\n    }\r\n    show() {\r\n        this.elem.classList.add(\"show\");\r\n    }\r\n    hide() {\r\n        this.elem.classList.remove(\"show\");\r\n    }\r\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/view/dom-view/page.js\n// module id = 5\n// module chunks = 0","module.exports = __webpack_public_path__ + \"src/css/ziti.eot\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/css/ziti.eot\n// module id = 6\n// module chunks = 0","module.exports = __webpack_public_path__ + \"src/images/bg.jpg\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/images/bg.jpg\n// module id = 7\n// module chunks = 0","module.exports = __webpack_public_path__ + \"src/images/black-piece.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/images/black-piece.png\n// module id = 8\n// module chunks = 0","module.exports = __webpack_public_path__ + \"src/images/white-piece.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/images/white-piece.png\n// module id = 9\n// module chunks = 0","import Actor from '../actor.js';\r\n\r\n\r\nexport default class PlayerActor extends Actor {\r\n    init(role) {\r\n        super.init(...arguments);\r\n        // 因玩家公用一个 playerActor 类，需根据玩家角色构建对象\r\n        this.role = role;\r\n        this.pieceType;\r\n        this.myTurn = false;\r\n        this.lock = false;\r\n    }\r\n\r\n    initWidget() {\r\n        this.widget.init(this.role, this.isRobot); \r\n    }\r\n\r\n    handleStageBoardcast() {\r\n        return {\r\n            setPlaying: (playingActor, chessboardData, pieceStack) => {\r\n\r\n                // 自己有没有下子，判断悔棋炒作是否可行\r\n                let hasPut = (pieceStack)=>{\r\n                    if (pieceStack.length === 0 || (pieceStack.length === 1 && pieceStack[0].pieceType !== this.pieceType)) {\r\n                        return false;\r\n                    } else {\r\n                        return true;\r\n                    }\r\n                }\r\n\r\n                this.myTurn = playingActor === this;\r\n                this.widgetData.undoState = !hasPut(pieceStack) ? 'disabled' : (this.myTurn?'playing':'wait');\r\n                this.widgetData.playerState = this.myTurn?'playing':'wait';\r\n            },\r\n            lock: ()=>{\r\n                this.lock = true;\r\n                this.widgetData.prevent = true;\r\n                this.widgetData.playerState = 'wait';\r\n            },\r\n\r\n            unlock: ()=>{\r\n                this.lock = false;\r\n                this.widgetData.prevent = false;\r\n                this.widgetData.playerState = this.myTurn?'playing':'wait';\r\n            },\r\n            gameover: (overData)=>{\r\n                this.widgetData.playerState = overData.winner===this? 'win': (overData.winner==null? 'wait': 'lose');\r\n            }\r\n        }\r\n    }\r\n\r\n    handleWidgetEvent() {\r\n        return {\r\n            undo: ()=>{\r\n                this.dispatch('undo', this, (isSuccess)=>{ \r\n                    this.widgetData.undoState = isSuccess?'undoundo':'undo';\r\n                });\r\n            },\r\n            undoundo: ()=>{\r\n                this.dispatch('undoundo', this);\r\n                this.widgetData.undoState = 'undo';\r\n            },\r\n            askDraw: ()=>{\r\n                this.dispatch('askDraw', this);\r\n            },\r\n            giveIn: ()=>{\r\n                this.dispatch('giveIn', this);\r\n            }\r\n        }\r\n    }\r\n\r\n    putPiece(crood) {\r\n        if (this.myTurn) {\r\n            this.dispatch('putPiece', {pieceType: this.pieceType, crood: crood});\r\n        }\r\n    }\r\n\r\n    makeWidgetData(resetData) {\r\n        if (!resetData) return{};\r\n        return {\r\n            avatar: resetData.avatar,\r\n            pieceType: resetData.pieceType,\r\n            playerState: 'wait',\r\n            undoState: 'disabled'\r\n        };\r\n    }\r\n\r\n    reset(data) {\r\n        super.reset(...arguments);\r\n        if (!data) return;\r\n        this.hasPut = 0;\r\n        this.pieceType = data.pieceType;\r\n        this.avatar = data.avatar;\r\n    }\r\n\r\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/game/play/player-actor.js\n// module id = 10\n// module chunks = 0","import {globalData} from 'Src/js/global-data.js';\r\nimport AvatarStage from './avatar/avatar-stage.js';\r\nimport GateStage from './gate/gate-stage.js';\r\nimport PlayStage from './play/play-stage.js';\r\n\r\nclass Game {\r\n    constructor(view) {\r\n        \r\n        this.stages = {};\r\n        this.currentStage = null;\r\n\r\n        this.view = view;\r\n    }\r\n\r\n    init() {\r\n        let avatar = new AvatarStage(this, this.view.pages.avatar);\r\n        let gate = new GateStage(this, this.view.pages.gate);\r\n        let play = new PlayStage(this, this.view.pages.play);\r\n\r\n        this.view.init();\r\n        this.stages = {avatar, gate, play};\r\n    }\r\n\r\n    start() {\r\n        /* test*/\r\n        // globalData.player1.avatar = 'avatar-1-2';\r\n        // globalData.player2.avatar = 'avatar-2-1';\r\n        // this.goToStage('play', {time: 5, mode: 'duet'}); return;\r\n\r\n        // this.goToStage('gate'); return;\r\n\r\n        // console.log(globalData);\r\n        // if (!!globalData.player1.avatar) {\r\n            // 首次游戏，设置头像\r\n            this.goToStage('avatar');\r\n        // } else {\r\n            // this.goToStage('gate');\r\n        // }\r\n    }\r\n\r\n    exit() {\r\n\r\n    }\r\n\r\n    goToStage(name, data) {\r\n        if (this.currentStage) {\r\n            this.currentStage._inactivate();\r\n        }\r\n        \r\n        this.currentStage = this.stages[name];\r\n        this.currentStage._activate(data);\r\n    }\r\n}\r\n\r\n\r\nexport default Game;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/game/game.js\n// module id = 11\n// module chunks = 0","import BaseView from '../base-view/view.js';\r\nimport AvatarPage from './avatar/avatar-page.js';\r\nimport GatePage from './gate/gate-page.js';\r\nimport PlayPage from './play/play-page.js';\r\nimport 'Src/css/style.scss';\r\n\r\nexport default class View extends BaseView {\r\n    constructor() {\r\n        super();\r\n        this.pages = {};\r\n    }\r\n    init() {\r\n        let avatarElem = document.querySelector('#avatar');\r\n        let gateElem = document.querySelector('#gate');\r\n        let playElem = document.querySelector('#play');\r\n        let avatar = new AvatarPage(avatarElem);\r\n        let gate = new GatePage(gateElem);\r\n        let play = new PlayPage(playElem);\r\n\r\n        this.pages = {avatar, gate, play};\r\n    }\r\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/view/dom-view/view.js\n// module id = 12\n// module chunks = 0","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"/* RESET*/\\nhtml, body, div, ul, ol, li, dl, dt, dd, h1, h2, h3, h4, h5, h6, pre, form, p, blockquote, fieldset, input, abbr, article, aside, command, details, figcaption, figure, footer, header, hgroup, mark, meter, nav, output, progress, section, summary, time {\\n  margin: 0;\\n  padding: 0; }\\n\\nh1, h2, h3, h4, h5, h6, pre, code, address, caption, cite, code, em, strong, th, figcaption {\\n  font-size: 1em;\\n  font-weight: normal;\\n  font-style: normal; }\\n\\nfieldset, iframe {\\n  border: none; }\\n\\ncaption, th {\\n  text-align: left; }\\n\\ntable {\\n  border-collapse: collapse;\\n  border-spacing: 0; }\\n\\narticle, aside, footer, header, hgroup, nav, section, figure, figcaption {\\n  display: block; }\\n\\n/* LAYOUT */\\n* {\\n  margin: 0;\\n  padding: 0; }\\n\\nhtml, body {\\n  width: 100%;\\n  height: 100%;\\n  position: relative; }\\n\\nhtml {\\n  background-color: #fff; }\\n\\n.clear {\\n  clear: both; }\\n\\n.clearer {\\n  clear: both;\\n  display: block;\\n  margin: 0;\\n  padding: 0;\\n  height: 0;\\n  line-height: 1px;\\n  font-size: 1px; }\\n\\n.selfclear {\\n  zoom: 1; }\\n\\n.selfclear:after {\\n  content: '.';\\n  display: block;\\n  height: 0;\\n  clear: both;\\n  visibility: hidden; }\\n\\nimg {\\n  border: 0; }\\n\\na {\\n  text-decoration: none;\\n  color: #515151; }\\n  a:focus {\\n    outline: none; }\\n\\ni {\\n  font-style: normal; }\\n\\nul, li {\\n  list-style: none; }\\n\\nbody {\\n  font: 14px/1.5 'microsoft yahei';\\n  color: #515151; }\\n\\n.clearfix:after, .clearfix:before {\\n  content: \\\"\\\";\\n  display: table;\\n  height: 0px;\\n  clear: both;\\n  visibility: hidden; }\\n\\n.clearfix {\\n  *zoom: 1; }\\n\\n.fl {\\n  float: left; }\\n\\n.fr {\\n  float: right; }\\n\\n.br0 {\\n  border: none; }\\n\\n.key-color {\\n  color: #333; }\\n\\n.maim-color {\\n  color: #666; }\\n\\n.auxiliary-color {\\n  color: #999; }\\n\\n@font-face {\\n  font-family: \\\"ziti\\\";\\n  src: url(\" + require(\"./ziti.eot\") + \");\\n  /* IE9 */\\n  src: url(\" + require(\"./ziti.eot\") + \"?#iefix) format(\\\"embedded-opentype\\\"), url(\" + require(\"./ziti.woff\") + \") format(\\\"woff\\\"), url(\" + require(\"./ziti.ttf\") + \") format(\\\"truetype\\\"), url(\" + require(\"./ziti.svg\") + \"#ziti) format(\\\"svg\\\");\\n  /* iOS 4.1- */\\n  font-style: normal;\\n  font-weight: normal; }\\n\\nbody {\\n  font-family: \\\"ziti\\\";\\n  font-size: 30px;\\n  color: #000; }\\n\\n.container {\\n  width: 1368px;\\n  height: 768px;\\n  overflow: hidden;\\n  background: url(\" + require(\"../images/bg-1.jpg\") + \") no-repeat;\\n  background-size: 100%; }\\n\\n.pic {\\n  background-position: center;\\n  background-repeat: no-repeat;\\n  background-size: 100%; }\\n\\n.btn {\\n  display: inline-block;\\n  font-size: 30px;\\n  padding: 10px;\\n  border: 1px solid #666; }\\n\\n.pointer {\\n  cursor: pointer; }\\n\\n.show {\\n  display: block !important; }\\n\\n.page {\\n  display: none;\\n  position: relative;\\n  width: 100%;\\n  height: 100%; }\\n\\n.page.show {\\n  display: block; }\\n\\n.avatar-1-1 {\\n  background-image: url(\" + require(\"../images/avatar-1-1.png\") + \"); }\\n\\n.avatar-1-2 {\\n  background-image: url(\" + require(\"../images/avatar-1-2.png\") + \"); }\\n\\n.avatar-2-1 {\\n  background-image: url(\" + require(\"../images/avatar-2-1.png\") + \"); }\\n\\n.avatar-2-2 {\\n  background-image: url(\" + require(\"../images/avatar-2-2.png\") + \"); }\\n\\n.avatar-robot {\\n  background-image: url(\" + require(\"../images/avatar-robot.png\") + \"); }\\n\\n#avatar h1 {\\n  font-size: 50px;\\n  padding: 50px 80px; }\\n\\n#avatar .avatar-select {\\n  display: flex;\\n  width: 90%;\\n  margin: 0 auto;\\n  justify-content: space-around;\\n  padding: 10px;\\n  border: 1px solid rgba(0, 0, 0, 0.2); }\\n\\n#avatar .avatars {\\n  margin-top: 30px; }\\n\\n#avatar .avatar {\\n  position: relative;\\n  display: inline-block;\\n  width: 200px;\\n  height: 200px;\\n  margin: 30px; }\\n  #avatar .avatar.selected:after {\\n    position: absolute;\\n    top: 50%;\\n    left: 50%;\\n    width: 100%;\\n    padding-top: 100%;\\n    transform: translate(-50%, -50%);\\n    display: block;\\n    content: '';\\n    background: url(\" + require(\"../images/selected.png\") + \") no-repeat center;\\n    background-size: 100%; }\\n\\n#avatar .select-ok {\\n  float: right;\\n  margin-top: 80px;\\n  margin-right: 60px; }\\n\\n#gate .gate-select {\\n  padding: 120px 0 0 450px; }\\n  #gate .gate-select h2 {\\n    font-size: 50px;\\n    padding: 10px; }\\n\\n#gate .options {\\n  width: 600px;\\n  height: 160px; }\\n  #gate .options .option {\\n    float: left;\\n    position: relative;\\n    width: 130px;\\n    height: 50px;\\n    line-height: 50px;\\n    margin: 10px;\\n    text-align: center; }\\n    #gate .options .option.selected:after {\\n      position: absolute;\\n      top: 50%;\\n      left: 50%;\\n      width: 100%;\\n      padding-top: 100%;\\n      transform: translate(-50%, -50%);\\n      display: block;\\n      content: '';\\n      background: url(\" + require(\"../images/selected.png\") + \") no-repeat center;\\n      background-size: 100%; }\\n\\n#gate .back {\\n  position: absolute;\\n  top: 30px;\\n  left: 60px;\\n  width: 80px;\\n  height: 80px;\\n  background-image: url(\" + require(\"../images/back.png\") + \"); }\\n\\n#play .confirm {\\n  display: none;\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  z-index: 100;\\n  width: 100%;\\n  height: 100%;\\n  background: rgba(0, 0, 0, 0.1); }\\n  #play .confirm .confirm-box {\\n    width: 450px;\\n    height: 150px;\\n    position: absolute;\\n    left: 50%;\\n    top: 50%;\\n    transform: translate(-50%, -50%);\\n    padding: 20px;\\n    background-size: 70%;\\n    box-shadow: 5px 3px 8px rgba(0, 0, 0, 0.3);\\n    background-image: url(\" + require(\"../images/bg.jpg\") + \"); }\\n    #play .confirm .confirm-box .confirm-msg {\\n      font-size: 30px;\\n      margin-bottom: 30px; }\\n    #play .confirm .confirm-box .confirm-handle {\\n      display: none; }\\n      #play .confirm .confirm-box .confirm-handle .confirm-btn {\\n        margin: 20px;\\n        font-size: 20px;\\n        float: right;\\n        cursor: pointer; }\\n\\n#play .chessboard {\\n  position: absolute;\\n  left: 50%;\\n  top: 3%;\\n  transform: translate(-50%, 0);\\n  display: flex;\\n  flex-wrap: wrap;\\n  width: 600px;\\n  padding: 40px;\\n  background: url(\" + require(\"../images/qipan.png\") + \") center no-repeat;\\n  background-size: 100%; }\\n  #play .chessboard .square {\\n    width: 40px;\\n    height: 40px;\\n    cursor: pointer; }\\n    #play .chessboard .square, #play .chessboard .square i {\\n      background-repeat: no-repeat;\\n      background-position: center;\\n      background-size: 100%; }\\n    #play .chessboard .square i {\\n      display: block;\\n      width: 100%;\\n      height: 100%; }\\n    #play .chessboard .square.black i {\\n      background-image: url(\" + require(\"../images/black-piece.png\") + \"); }\\n    #play .chessboard .square.white i {\\n      background-image: url(\" + require(\"../images/white-piece.png\") + \"); }\\n  #play .chessboard.playing-black .square:hover {\\n    background-image: url(\" + require(\"../images/black-hover.png\") + \"); }\\n  #play .chessboard.playing-white .square:hover {\\n    background-image: url(\" + require(\"../images/white-hover.png\") + \"); }\\n  #play .chessboard .white:hover, #play .chessboard .black:hover,\\n  #play .chessboard.forbidden .square:hover, #play .chessboard.forbidden .square:hover {\\n    background: none !important;\\n    cursor: not-allowed; }\\n\\n#play .time {\\n  display: flex;\\n  justify-content: space-around;\\n  line-height: 40px; }\\n  #play .time .time-total {\\n    font-size: 40px; }\\n\\n#play .player {\\n  width: 30%;\\n  height: 100%;\\n  box-sizing: border-box;\\n  padding: 80px 60px 50px 60px; }\\n  #play .player .avatar {\\n    width: 160px;\\n    height: 160px;\\n    margin: 30px auto;\\n    background-size: 100%; }\\n  #play .player .piece {\\n    position: relative;\\n    width: 150px;\\n    height: 150px;\\n    margin: 0 auto; }\\n    #play .player .piece.white {\\n      background-image: url(\" + require(\"../images/white-piece.png\") + \"); }\\n    #play .player .piece.black {\\n      background-image: url(\" + require(\"../images/black-piece.png\") + \"); }\\n    #play .player .piece:after {\\n      position: absolute;\\n      top: 50%;\\n      left: 50%;\\n      width: 100%;\\n      padding-top: 100%;\\n      transform: translate(-50%, -50%);\\n      display: block;\\n      content: '';\\n      background: url(\" + require(\"../images/selected.png\") + \") no-repeat center;\\n      background-size: 100%;\\n      opacity: 0;\\n      transition: opacity 0.3s; }\\n  #play .player.playing .piece:after {\\n    opacity: 1; }\\n  #play .player.player1 {\\n    float: left; }\\n  #play .player.player2 {\\n    float: right; }\\n  #play .player .player-handle {\\n    text-align: center; }\\n  #play .player .player-btn {\\n    cursor: pointer; }\\n    #play .player .player-btn.disabled {\\n      opacity: 0.5;\\n      cursor: not-allowed; }\\n  #play .player.playing .avatar-1-1 {\\n    background-image: url(\" + require(\"../images/avatar-1-1-playing.png\") + \"); }\\n  #play .player.playing .avatar-1-2 {\\n    background-image: url(\" + require(\"../images/avatar-1-2-playing.png\") + \"); }\\n  #play .player.playing .avatar-2-1 {\\n    background-image: url(\" + require(\"../images/avatar-2-1-playing.png\") + \"); }\\n  #play .player.playing .avatar-2-2 {\\n    background-image: url(\" + require(\"../images/avatar-2-2-playing.png\") + \"); }\\n  #play .player.wait .avatar-1-1 {\\n    background-image: url(\" + require(\"../images/avatar-1-1-wait.png\") + \"); }\\n  #play .player.wait .avatar-1-2 {\\n    background-image: url(\" + require(\"../images/avatar-1-2-wait.png\") + \"); }\\n  #play .player.wait .avatar-2-1 {\\n    background-image: url(\" + require(\"../images/avatar-2-1-wait.png\") + \"); }\\n  #play .player.wait .avatar-2-2 {\\n    background-image: url(\" + require(\"../images/avatar-2-2-wait.png\") + \"); }\\n  #play .player.lose .avatar-1-1 {\\n    background-image: url(\" + require(\"../images/avatar-1-1-lose.png\") + \"); }\\n  #play .player.lose .avatar-1-2 {\\n    background-image: url(\" + require(\"../images/avatar-1-2-lose.png\") + \"); }\\n  #play .player.lose .avatar-2-1 {\\n    background-image: url(\" + require(\"../images/avatar-2-1-lose.png\") + \"); }\\n  #play .player.lose .avatar-2-2 {\\n    background-image: url(\" + require(\"../images/avatar-2-2-lose.png\") + \"); }\\n  #play .player.win .avatar-1-1 {\\n    background-image: url(\" + require(\"../images/avatar-1-1-win.png\") + \"); }\\n  #play .player.win .avatar-1-2 {\\n    background-image: url(\" + require(\"../images/avatar-1-2-win.png\") + \"); }\\n  #play .player.win .avatar-2-1 {\\n    background-image: url(\" + require(\"../images/avatar-2-1-win.png\") + \"); }\\n  #play .player.win .avatar-2-2 {\\n    background-image: url(\" + require(\"../images/avatar-2-2-win.png\") + \"); }\\n\\n#play .gameover {\\n  display: none;\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  z-index: 100;\\n  width: 100%;\\n  height: 100%;\\n  background: rgba(0, 0, 0, 0.1); }\\n  #play .gameover .gameover-box {\\n    width: 450px;\\n    height: 150px;\\n    position: absolute;\\n    left: 50%;\\n    top: 50%;\\n    transform: translate(-50%, -50%);\\n    background-image: url(\" + require(\"../images/bg.jpg\") + \");\\n    padding: 20px;\\n    background-size: 70%;\\n    box-shadow: 5px 3px 8px rgba(0, 0, 0, 0.3); }\\n    #play .gameover .gameover-box .gameover-msg {\\n      font-size: 30px;\\n      margin-bottom: 30px; }\\n    #play .gameover .gameover-box .gameover-handle .gameover-btn {\\n      margin: 20px;\\n      font-size: 20px;\\n      float: right;\\n      cursor: pointer; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./~/sass-loader!./src/css/style.scss\n// module id = 13\n// module chunks = 0","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n// css base code, injected by the css-loader\r\nmodule.exports = function() {\r\n\tvar list = [];\r\n\r\n\t// return the list of modules as css string\r\n\tlist.toString = function toString() {\r\n\t\tvar result = [];\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar item = this[i];\r\n\t\t\tif(item[2]) {\r\n\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\r\n\t\t\t} else {\r\n\t\t\t\tresult.push(item[1]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result.join(\"\");\r\n\t};\r\n\r\n\t// import a list of modules into the list\r\n\tlist.i = function(modules, mediaQuery) {\r\n\t\tif(typeof modules === \"string\")\r\n\t\t\tmodules = [[null, modules, \"\"]];\r\n\t\tvar alreadyImportedModules = {};\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar id = this[i][0];\r\n\t\t\tif(typeof id === \"number\")\r\n\t\t\t\talreadyImportedModules[id] = true;\r\n\t\t}\r\n\t\tfor(i = 0; i < modules.length; i++) {\r\n\t\t\tvar item = modules[i];\r\n\t\t\t// skip already imported module\r\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\r\n\t\t\t//  when a module is imported multiple times with different media queries.\r\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\r\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\r\n\t\t\t\tif(mediaQuery && !item[2]) {\r\n\t\t\t\t\titem[2] = mediaQuery;\r\n\t\t\t\t} else if(mediaQuery) {\r\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\r\n\t\t\t\t}\r\n\t\t\t\tlist.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn list;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader/lib/css-base.js\n// module id = 14\n// module chunks = 0","module.exports = __webpack_public_path__ + \"src/css/ziti.svg\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/css/ziti.svg\n// module id = 15\n// module chunks = 0","module.exports = __webpack_public_path__ + \"src/css/ziti.ttf\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/css/ziti.ttf\n// module id = 16\n// module chunks = 0","module.exports = __webpack_public_path__ + \"src/css/ziti.woff\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/css/ziti.woff\n// module id = 17\n// module chunks = 0","module.exports = __webpack_public_path__ + \"src/images/avatar-1-1-lose.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/images/avatar-1-1-lose.png\n// module id = 18\n// module chunks = 0","module.exports = __webpack_public_path__ + \"src/images/avatar-1-1-playing.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/images/avatar-1-1-playing.png\n// module id = 19\n// module chunks = 0","module.exports = __webpack_public_path__ + \"src/images/avatar-1-1-wait.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/images/avatar-1-1-wait.png\n// module id = 20\n// module chunks = 0","module.exports = __webpack_public_path__ + \"src/images/avatar-1-1-win.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/images/avatar-1-1-win.png\n// module id = 21\n// module chunks = 0","module.exports = __webpack_public_path__ + \"src/images/avatar-1-1.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/images/avatar-1-1.png\n// module id = 22\n// module chunks = 0","module.exports = __webpack_public_path__ + \"src/images/avatar-1-2-lose.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/images/avatar-1-2-lose.png\n// module id = 23\n// module chunks = 0","module.exports = __webpack_public_path__ + \"src/images/avatar-1-2-playing.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/images/avatar-1-2-playing.png\n// module id = 24\n// module chunks = 0","module.exports = __webpack_public_path__ + \"src/images/avatar-1-2-wait.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/images/avatar-1-2-wait.png\n// module id = 25\n// module chunks = 0","module.exports = __webpack_public_path__ + \"src/images/avatar-1-2-win.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/images/avatar-1-2-win.png\n// module id = 26\n// module chunks = 0","module.exports = __webpack_public_path__ + \"src/images/avatar-1-2.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/images/avatar-1-2.png\n// module id = 27\n// module chunks = 0","module.exports = __webpack_public_path__ + \"src/images/avatar-2-1-lose.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/images/avatar-2-1-lose.png\n// module id = 28\n// module chunks = 0","module.exports = __webpack_public_path__ + \"src/images/avatar-2-1-playing.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/images/avatar-2-1-playing.png\n// module id = 29\n// module chunks = 0","module.exports = __webpack_public_path__ + \"src/images/avatar-2-1-wait.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/images/avatar-2-1-wait.png\n// module id = 30\n// module chunks = 0","module.exports = __webpack_public_path__ + \"src/images/avatar-2-1-win.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/images/avatar-2-1-win.png\n// module id = 31\n// module chunks = 0","module.exports = __webpack_public_path__ + \"src/images/avatar-2-1.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/images/avatar-2-1.png\n// module id = 32\n// module chunks = 0","module.exports = __webpack_public_path__ + \"src/images/avatar-2-2-lose.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/images/avatar-2-2-lose.png\n// module id = 33\n// module chunks = 0","module.exports = __webpack_public_path__ + \"src/images/avatar-2-2-playing.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/images/avatar-2-2-playing.png\n// module id = 34\n// module chunks = 0","module.exports = __webpack_public_path__ + \"src/images/avatar-2-2-wait.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/images/avatar-2-2-wait.png\n// module id = 35\n// module chunks = 0","module.exports = __webpack_public_path__ + \"src/images/avatar-2-2-win.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/images/avatar-2-2-win.png\n// module id = 36\n// module chunks = 0","module.exports = __webpack_public_path__ + \"src/images/avatar-2-2.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/images/avatar-2-2.png\n// module id = 37\n// module chunks = 0","module.exports = __webpack_public_path__ + \"src/images/avatar-robot.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/images/avatar-robot.png\n// module id = 38\n// module chunks = 0","module.exports = __webpack_public_path__ + \"src/images/back.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/images/back.png\n// module id = 39\n// module chunks = 0","module.exports = __webpack_public_path__ + \"src/images/bg-1.jpg\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/images/bg-1.jpg\n// module id = 40\n// module chunks = 0","module.exports = __webpack_public_path__ + \"src/images/black-hover.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/images/black-hover.png\n// module id = 41\n// module chunks = 0","module.exports = __webpack_public_path__ + \"src/images/qipan.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/images/qipan.png\n// module id = 42\n// module chunks = 0","module.exports = __webpack_public_path__ + \"src/images/white-hover.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/images/white-hover.png\n// module id = 43\n// module chunks = 0","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\nvar stylesInDom = {},\n\tmemoize = function(fn) {\n\t\tvar memo;\n\t\treturn function () {\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\t\treturn memo;\n\t\t};\n\t},\n\tisOldIE = memoize(function() {\n\t\treturn /msie [6-9]\\b/.test(self.navigator.userAgent.toLowerCase());\n\t}),\n\tgetHeadElement = memoize(function () {\n\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\n\t}),\n\tsingletonElement = null,\n\tsingletonCounter = 0,\n\tstyleElementsInsertedAtTop = [];\n\nmodule.exports = function(list, options) {\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the bottom of <head>.\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list);\n\taddStylesToDom(styles, options);\n\n\treturn function update(newList) {\n\t\tvar mayRemove = [];\n\t\tfor(var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\n\t\t\t\t\tdomStyle.parts[j]();\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n}\n\nfunction addStylesToDom(styles, options) {\n\tfor(var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles(list) {\n\tvar styles = [];\n\tvar newStyles = {};\n\tfor(var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\t\tif(!newStyles[id])\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse\n\t\t\tnewStyles[id].parts.push(part);\n\t}\n\treturn styles;\n}\n\nfunction insertStyleElement(options, styleElement) {\n\tvar head = getHeadElement();\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\n\tif (options.insertAt === \"top\") {\n\t\tif(!lastStyleElementInsertedAtTop) {\n\t\t\thead.insertBefore(styleElement, head.firstChild);\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\thead.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\thead.appendChild(styleElement);\n\t\t}\n\t\tstyleElementsInsertedAtTop.push(styleElement);\n\t} else if (options.insertAt === \"bottom\") {\n\t\thead.appendChild(styleElement);\n\t} else {\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\n\t}\n}\n\nfunction removeStyleElement(styleElement) {\n\tstyleElement.parentNode.removeChild(styleElement);\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\n\tif(idx >= 0) {\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement(options) {\n\tvar styleElement = document.createElement(\"style\");\n\tstyleElement.type = \"text/css\";\n\tinsertStyleElement(options, styleElement);\n\treturn styleElement;\n}\n\nfunction createLinkElement(options) {\n\tvar linkElement = document.createElement(\"link\");\n\tlinkElement.rel = \"stylesheet\";\n\tinsertStyleElement(options, linkElement);\n\treturn linkElement;\n}\n\nfunction addStyle(obj, options) {\n\tvar styleElement, update, remove;\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\n\t} else if(obj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\") {\n\t\tstyleElement = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, styleElement);\n\t\tremove = function() {\n\t\t\tremoveStyleElement(styleElement);\n\t\t\tif(styleElement.href)\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\n\t\t};\n\t} else {\n\t\tstyleElement = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, styleElement);\n\t\tremove = function() {\n\t\t\tremoveStyleElement(styleElement);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle(newObj) {\n\t\tif(newObj) {\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\n\t\t\t\treturn;\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (styleElement.styleSheet) {\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = styleElement.childNodes;\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\n\t\tif (childNodes.length) {\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyleElement.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag(styleElement, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyleElement.setAttribute(\"media\", media)\n\t}\n\n\tif(styleElement.styleSheet) {\n\t\tstyleElement.styleSheet.cssText = css;\n\t} else {\n\t\twhile(styleElement.firstChild) {\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\n\t\t}\n\t\tstyleElement.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink(linkElement, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\tif(sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = linkElement.href;\n\n\tlinkElement.href = URL.createObjectURL(blob);\n\n\tif(oldSrc)\n\t\tURL.revokeObjectURL(oldSrc);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/style-loader/addStyles.js\n// module id = 44\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/index.js!./style.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/index.js!./style.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/index.js!./style.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/css/style.scss\n// module id = 45\n// module chunks = 0","export class EventEmitter {\r\n    constructor() {\r\n        this.listeners = {};\r\n    }\r\n\r\n    addEventListener(eventName, callback) {\r\n        this.listeners[eventName] = this.listeners[eventName] || [];\r\n        this.listeners[eventName].push(callback);\r\n    }\r\n\r\n    removeEventListener(eventName, callback) {\r\n        if (!this.listeners[eventName]) { return; }\r\n        if (!callback) {\r\n            delete this.listeners[eventName];\r\n            return;\r\n        }\r\n        this.listeners[eventName].forEach((fn, i)=>{\r\n            if (fn === callback) {\r\n                this.listeners[eventName].splice(i, 1);\r\n                return false;\r\n            }\r\n        });\r\n    }\r\n\r\n    trigger(eventName, data) {\r\n        this.listeners[eventName] && this.listeners[eventName].forEach(function(fn) {\r\n            fn(data);\r\n        });\r\n    }\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/common.js\n// module id = 46\n// module chunks = 0","import {globalData} from 'Src/js/global-data.js';\r\nimport Stage from '../stage.js';\r\nimport AvatarSelectorActor from './avatarselector-actor.js';\r\n\r\n\r\nexport default class AvatarStage extends Stage {\r\n\r\n    constructor(game, view) {\r\n        super(game, view);\r\n        this.name = 'avatar';\r\n        this.data;\r\n        this.avatarSelectorActor;\r\n    }\r\n\r\n    init() {\r\n        super.init();\r\n        this.avatarSelectorActor = this.createActor('AvatarSelector');\r\n    }\r\n\r\n\r\n    handleActorDispatch() {\r\n        return {\r\n            selectAvatar: (selected)=>{\r\n                globalData.player1.avatar = selected.player1Avatar;\r\n                globalData.player2.avatar = selected.player2Avatar;\r\n                this.game.goToStage('gate');\r\n                // console.log(globalData);\r\n            }\r\n        }\r\n    }\r\n\r\n    createActorConstructors() {\r\n        return {\r\n            AvatarSelector: AvatarSelectorActor\r\n        }\r\n    }\r\n\r\n    inactivate() {\r\n        super.inactivate();\r\n    }\r\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/game/avatar/avatar-stage.js\n// module id = 47\n// module chunks = 0","import Actor from '../actor.js';\r\n\r\n\r\nexport default class AvatarSelectorActor extends Actor {\r\n    init() {\r\n        super.init();\r\n    }\r\n\r\n    handleWidgetEvent() {\r\n        // 处理 widget 交互事件\r\n        return {\r\n            'select-done': (selected)=>{\r\n                this.selectAvatar(selected);\r\n            }\r\n        }\r\n    }\r\n\r\n    selectAvatar(selected) {\r\n        // console.log(selected);\r\n        this.dispatch('selectAvatar', selected);\r\n    }\r\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/game/avatar/avatarselector-actor.js\n// module id = 48\n// module chunks = 0","import Stage from '../stage.js';\r\nimport SettingActor from './setting-actor';\r\n\r\nexport default class PlayStage extends Stage {\r\n\r\n    constructor(game, view) {\r\n        super(game, view);\r\n        this.name = 'gate';\r\n        this.settingActor;\r\n    }\r\n\r\n    init() {\r\n        super.init();\r\n        this.settingActor = this.createActor('Setting');\r\n    }\r\n\r\n\r\n    handleActorDispatch() {\r\n        return {\r\n            doSetting: (setting)=>{\r\n                this.game.goToStage('play', setting);\r\n            },\r\n            back: (setting)=>{\r\n                this.game.goToStage('avatar');\r\n            }\r\n        }\r\n    }\r\n\r\n    createActorConstructors() {\r\n        return {\r\n            Setting: SettingActor\r\n        }\r\n    }\r\n\r\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/game/gate/gate-stage.js\n// module id = 49\n// module chunks = 0","import Actor from '../actor.js';\r\n\r\n\r\nexport default class SettingActor extends Actor {\r\n    init() {\r\n        super.init();\r\n\r\n        this.widget.addEventListener('setting-done', (setting) => {\r\n            this.doSetting(setting);\r\n        });\r\n    }\r\n\r\n    handleWidgetEvent() {\r\n        // 处理 widget 交互事件\r\n        return {\r\n            'setting-done': (setting) => {\r\n                this.doSetting(setting);\r\n            },\r\n            'back': () => {\r\n                this.dispatch('back');\r\n            }\r\n        }\r\n    }\r\n\r\n    doSetting(setting) {\r\n        this.dispatch('doSetting', setting);\r\n    }\r\n\r\n    makeWidgetData() {\r\n        return {\r\n            time: 5\r\n        }\r\n    }\r\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/game/gate/setting-actor.js\n// module id = 50\n// module chunks = 0","import PlayActor from '../actor.js';\r\n\r\n\r\nexport default class ChessboardActor extends PlayActor {\r\n    init() {\r\n        super.init(...arguments);\r\n        this.horizontal = 15; // 格子个数\r\n        this.vertical = 15; // 格子个数\r\n        this.pieceData = (new Array(this.vertical)).fill(1).map((a)=>{\r\n            return new Array(this.horizontal);\r\n        });;\r\n        \r\n        this.playingActor;\r\n\r\n        this.lock = false;\r\n    }\r\n\r\n    initWidget() {\r\n        super.initWidget();\r\n        this.widget.createSquares(this.horizontal, this.vertical);\r\n    }\r\n\r\n    handleWidgetEvent() {\r\n        // 处理 widget 交互事件\r\n        return {\r\n            'square-click': (crood)=>{\r\n                this.tellPlayActorPutPiece(crood);\r\n            }\r\n        }\r\n    }\r\n\r\n    handleStageBoardcast() {\r\n        return {\r\n            setPlaying: (playingActor)=>{\r\n                this.playingActor = playingActor;\r\n                this.setWidgetPrevent();\r\n                this.widget.setActivePiece(this.playingActor.pieceType);\r\n            },\r\n\r\n            start: ()=>{\r\n                this.pieceData = (new Array(this.vertical)).fill(1).map((a)=>{\r\n                    return new Array(this.horizontal);\r\n                });\r\n\r\n                this.widget.clearChessboard();\r\n            },\r\n\r\n            lock: ()=>{\r\n                this.lock = true;\r\n                this.setWidgetPrevent();\r\n            },\r\n\r\n            unlock: ()=>{\r\n                this.lock = false;\r\n                this.setWidgetPrevent();\r\n            }\r\n        }\r\n    }\r\n\r\n    makeWidgetData(resetData) {\r\n        return {\r\n            forbidden: true\r\n        };\r\n    }\r\n\r\n\r\n    setWidgetPrevent() {\r\n        if ((this.playingActor && this.playingActor.isRobot) || this.lock) {\r\n            this.widgetData.forbidden = true;\r\n        } else {\r\n            this.widgetData.forbidden = false;\r\n        }\r\n    }\r\n\r\n    tellPlayActorPutPiece(crood) {\r\n        if (!this.playingActor.isRobot) {\r\n            this.playingActor.putPiece(crood);\r\n        }\r\n    }\r\n\r\n    // 传入刚下的子，判断是否获胜，向四个方向发散计算，到 5 个就赢啦\r\n    isWin(piece, crood) {\r\n        let directions = [\r\n            {x:1},//横\r\n            {y:1},//竖\r\n            {x:1, y:-1},//斜\r\n            {x:1, y:1} //反斜\r\n        ];\r\n\r\n        let calPiece = (crood, step, piece)=>{\r\n            let pCount = 0;\r\n\r\n            crood = {x: crood.x, y: crood.y};\r\n            while(true) {\r\n                for(var key in step) {\r\n                    crood[key] += step[key]; //console.log(crood.x, crood.y);\r\n                }\r\n                if (\r\n                    crood.x >= 0 && \r\n                    crood.y >=0 && \r\n                    crood.x < this.horizontal && \r\n                    crood.y < this.vertical &&\r\n                    this.pieceData[crood.x][crood.y] === piece\r\n                ) {\r\n                    pCount++;\r\n                } else {\r\n                    break;\r\n                }\r\n            }\r\n            return pCount;\r\n        }\r\n\r\n        for(let i = 0; i < directions.length; i++) {\r\n            let direction = directions[i];\r\n            let pieceCount = 1;\r\n\r\n            let step;\r\n            let curCrood = {x: Number(crood.x), y: Number(crood.y)}; // 当前判断的子\r\n\r\n            // 正向\r\n            step = direction;\r\n            pieceCount += calPiece(curCrood, step, piece);\r\n\r\n            // 反向\r\n            step = {};\r\n            step = direction;\r\n            for(let key in direction) {\r\n                step[key] = direction[key] * -1;\r\n            }\r\n            pieceCount += calPiece(curCrood, step, piece);\r\n\r\n            if (pieceCount >= 5) {\r\n                // console.log(1);\r\n                return true;\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    // 放子\r\n    receivePiece(pieceType, crood) {\r\n        this.pieceData[crood.x][crood.y] = pieceType;\r\n        this.widget.setSquare(pieceType, crood);\r\n\r\n        return this.isWin(pieceType, crood);\r\n        // console.log(pieceType, crood, this.playingActor.pieceType);\r\n    }\r\n\r\n    // 删除某个子，悔棋调用\r\n    deletePiece(crood) {\r\n        this.pieceData[crood.x][crood.y] = undefined;\r\n        this.widget.setSquare('', crood);\r\n    }\r\n\r\n    getChessboardData() {\r\n        return this.pieceData;\r\n    }\r\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/game/play/chessboard-actor.js\n// module id = 51\n// module chunks = 0","import PlayActor from '../actor.js';\r\n\r\n\r\nexport default class ControlerActor extends PlayActor {\r\n    init() {\r\n        super.init();\r\n    }\r\n\r\n    handleStageBoardcast() {\r\n        return {\r\n            start: ()=>{\r\n                \r\n            },\r\n\r\n            gameover: (overData)=>{\r\n                this.showGameoverMsg(overData.msg);\r\n            }\r\n        }\r\n    }\r\n\r\n    handleWidgetEvent() {\r\n        return {\r\n            restart: ()=>{\r\n                this.dispatch('restart');\r\n            },\r\n            back: ()=>{\r\n                this.dispatch('back');\r\n            }\r\n        }\r\n    }\r\n\r\n    showMsg(msg, dur=2000, callback) {\r\n        this.widget.showMsg(...arguments);\r\n    }\r\n\r\n    showConfirm(msg, confirmCallback, refuseCallback, confirmText='sure', refuseText='no' ) {\r\n        this.widget.showConfirm(...arguments);\r\n    }\r\n\r\n    showGameoverMsg(msg) {\r\n        this.widget.showGameoverMsg(msg);\r\n    }\r\n\r\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/game/play/controler-actor.js\n// module id = 52\n// module chunks = 0","import {globalData} from 'Src/js/global-data.js';\r\nimport msgMap from 'Src/js/msg-map.js';\r\nimport Stage from '../stage.js';\r\nimport ChessboardActor from './chessboard-actor.js';\r\nimport TimekeeperActor from './timekeeper-actor.js';\r\nimport PlayerActor from './player-actor.js';\r\nimport RobotActor from './robot-actor.js';\r\nimport ControlerActor from './controler-actor.js';\r\n\r\n\r\n\r\n\r\nexport default class PlayStage extends Stage {\r\n\r\n    constructor(game, view) {\r\n        super(game, view);\r\n        this.name = 'play';\r\n        // this.settingActor;\r\n\r\n        this.chessboradActor;\r\n        this.timeCounterActor;\r\n        this.player1Actor; // 玩家 1 固定玩家\r\n        this.controlerActor;\r\n\r\n        this.pieceStack = []; // 每一步下子记录\r\n        this.undoStack = []; // 上一次悔棋记录，用于撤销悔棋\r\n        this.pieceTypes = ['black', 'white'];\r\n        this.playingActor; // 当前需要下子的玩家是黑子还是白子 ， 'black', 'white'\r\n\r\n    }\r\n\r\n    init() {\r\n        super.init();\r\n        this.chessboradActor = this.createActor('Chessboard');\r\n        this.timekeeperActor = this.createActor('Timekeeper');\r\n        this.player1Actor = this.createActor('Player', 'player1');\r\n        this.controlerActor = this.createActor('Controler');\r\n    }\r\n\r\n    handleActorDispatch() {\r\n        return {\r\n            // 下子\r\n            putPiece: (data)=>{\r\n                if (this.playingActor.pieceType !== data.pieceType) return;\r\n\r\n                // 倘若赢棋，返回 true\r\n                if (this.chessboradActor.receivePiece(data.pieceType, data.crood)) {\r\n                    let winner = this.playingActor;\r\n                    let msg = `${msgMap[this.playingActor.pieceType]}获胜， 游戏结束`;\r\n                    this.gameover({winner, msg});\r\n                    return;\r\n                }\r\n                this.pieceStack.push(data);\r\n                this.undoStack.length = 0;\r\n                this.togglePlaying();\r\n            },\r\n\r\n            // 悔棋\r\n            undo: (player, callback)=>{\r\n\r\n                let _callback = (isAgree)=>{\r\n                    this.unlock(); \r\n                    callback(isAgree);\r\n                };\r\n                let agree = ()=>{\r\n                    if (this.playingActor === player) {\r\n                        this.undoStack.push(this.pieceStack.pop());\r\n                        this.undoStack.push(this.pieceStack.pop());\r\n                    } else {\r\n                        this.undoStack.push(this.pieceStack.pop());\r\n                        this.setPlaying(player);\r\n                    }\r\n\r\n                    this.undoStack.forEach(p=>this.chessboradActor.deletePiece(p.crood));\r\n                    _callback(true);\r\n                }\r\n                let refuse = ()=>{_callback(false);};\r\n\r\n                this.lock();\r\n                if (this.player2Actor.isRobot) {\r\n                    agree();\r\n                } else {\r\n                    let msg = `${msgMap[player.pieceType]} 想悔棋, 请问 ${msgMap[this.getOtherPlayer(player).pieceType]} 答应吗？`\r\n                    this.controlerActor.showConfirm(msg, agree, refuse, '同意', '拒绝');\r\n                }\r\n\r\n            },\r\n\r\n            // 撤销悔棋\r\n            undoundo: (player)=>{\r\n                this.undoStack.forEach(p=>this.chessboradActor.receivePiece(p.pieceType, p.crood));\r\n                if (this.undoStack.length === 1) {\r\n                    this.togglePlaying();\r\n                }\r\n                this.pieceStack.push(...this.undoStack);\r\n                this.undoStack.length = 0;\r\n            },\r\n\r\n            // 请求和棋\r\n            askDraw: (player)=>{\r\n\r\n                let _callback = ()=>{this.unlock();};\r\n                let agree = ()=>{\r\n                    let winner = null;\r\n                    let msg = '握手言和，游戏结束';\r\n                    this.gameover({winner, msg});\r\n                }\r\n                let refuse = ()=>{_callback()};\r\n\r\n                this.lock();\r\n                if (this.player2Actor.isRobot) {\r\n                    agree();\r\n                } else {\r\n                    let msg = `${msgMap[player.pieceType]} 想求和, 请问 ${msgMap[this.getOtherPlayer(player).pieceType]} 答应吗？`\r\n                    this.controlerActor.showConfirm(msg, agree, refuse, '同意', '拒绝');\r\n                }\r\n            },\r\n\r\n            // 认输\r\n            giveIn: (player)=>{\r\n                let winner = this.getOtherPlayer(player);\r\n                let msg = `${msgMap[player.pieceType]} 认怂，游戏结束`;\r\n                this.gameover({winner, msg});\r\n            },\r\n\r\n            // 时间到\r\n            timeup: (data)=>{\r\n                let winner = data.player1 === data.player2 ? null : data.player1 > data.player2 ? this.player2Actor : this.player1Actor;\r\n                let msg = winner ? '耗时少者获胜' : '耗时相同';\r\n                this.gameover({winner, msg});\r\n            },\r\n\r\n            // 回到主页\r\n            back: ()=>{\r\n                this.game.goToStage('gate');\r\n            },\r\n\r\n            restart: ()=>{\r\n                this.start();\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    createActorConstructors() {\r\n        return {\r\n            Chessboard: ChessboardActor,\r\n            Timekeeper: TimekeeperActor,\r\n            Player: PlayerActor,\r\n            Robot: RobotActor,\r\n            Controler: ControlerActor\r\n        }\r\n    }\r\n\r\n    activate(data) {\r\n        super.activate();\r\n        this.time = data.time;\r\n        this.mode = data.mode;\r\n\r\n        if (this.mode === 'duet') {\r\n            this.player2Actor = this.createActor('Player', 'player2');\r\n        } else {\r\n            this.player2Actor = this.createActor('Robot', 'player2', true);\r\n        }\r\n\r\n        this.timekeeperActor.setLimitTime(this.time);\r\n        this.start();\r\n    }\r\n\r\n    inactivate() {\r\n        this.player2Actor.distory();\r\n    }\r\n\r\n    start() {\r\n        this.pieceStack = [];\r\n        this.undoStack = [];\r\n\r\n        // console.log(globalData);\r\n\r\n        // 重新分配两个玩家黑白子\r\n        let player1PieceTypeIndex = (Math.random() * 2)|0;\r\n\r\n        let play1ResetData = {\r\n            pieceType: this.pieceTypes[player1PieceTypeIndex],\r\n            avatar: globalData.player1.avatar\r\n        };\r\n\r\n        let play2ResetData = {\r\n            pieceType: this.pieceTypes[1 - player1PieceTypeIndex],\r\n            avatar: this.player2Actor.isRobot ? 'avatar-robot' : globalData.player2.avatar\r\n        };\r\n\r\n        this.player1Actor.reset(play1ResetData);\r\n        this.player2Actor.reset(play2ResetData);\r\n        this.timekeeperActor.reset();\r\n\r\n\r\n        let playingActor = play1ResetData.pieceType === this.pieceTypes[0] ? this.player1Actor: this.player2Actor;\r\n\r\n        this.controlerActor.showMsg('重新分配黑白子...', 1000, ()=>{\r\n            this.setPlaying(playingActor); // 黑子先走\r\n            this.broadcast('start');\r\n            this.unlock();\r\n        });\r\n    }\r\n\r\n    setPlaying(playingActor) {\r\n        this.playingActor = playingActor;\r\n        this.broadcast('setPlaying', this.playingActor, this.chessboradActor.getChessboardData(), this.pieceStack);\r\n    }\r\n\r\n    getOtherPlayer(player) {\r\n        return player===this.player1Actor?this.player2Actor:this.player1Actor\r\n    }\r\n\r\n    togglePlaying() {\r\n        this.setPlaying(this.getOtherPlayer(this.playingActor))\r\n    }\r\n\r\n    // 执行确认操作时，需要锁定游戏\r\n    lock() {\r\n        this.broadcast('lock');\r\n    }\r\n\r\n    unlock() {\r\n        this.broadcast('unlock');\r\n    }\r\n\r\n    gameover(overData) {\r\n        this.lock();\r\n        this.broadcast('gameover', overData);\r\n    }\r\n\r\n\r\n\r\n\r\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/game/play/play-stage.js\n// module id = 53\n// module chunks = 0","import PlayerActor from './player-actor.js';\r\n\r\nexport default class RobotActor extends PlayerActor {\r\n    init() {\r\n        super.init(...arguments);\r\n        // this.chessboardData;\r\n        this.pieceNeedsToPut;\r\n        this.thinkTime = 500;\r\n        this.thinkT;\r\n        this.isRobot = true;\r\n    }\r\n\r\n    initWidget() {\r\n        this.widget.init(this.role, this.isRobot); \r\n    }\r\n\r\n    handleStageBoardcast() {\r\n        return {\r\n            setPlaying: (playingActor, chessboardData, pieceStack) => {\r\n                this.myTurn = playingActor === this;\r\n                this.widgetData.playerState = this.myTurn?'playing':'waiting';\r\n                if (!this.myTurn) return;\r\n                // this.chessboardData = chessboardData;\r\n                this.pieceNeedsToPut = this.calNextPiece(chessboardData);\r\n                this.thinkT = setTimeout(()=>{\r\n                    this.pieceNeedsToPut && this.putPiece(this.pieceNeedsToPut);\r\n                }, this.thinkTime);\r\n            },\r\n            lock: ()=>{\r\n                this.lock = true;\r\n                this.widgetData.prevent = true;\r\n                this.widgetData.playerState = 'waiting';\r\n            },\r\n\r\n            unlock: ()=>{\r\n                this.lock = false;\r\n                this.widgetData.prevent = false;\r\n                this.widgetData.playerState = this.myTurn?'playing':'waiting';\r\n                this.pieceNeedsToPut && this.putPiece(this.pieceNeedsToPut);\r\n            },\r\n            gameover: (overData)=>{\r\n                this.widgetData.playerState = overData.winner===this? 'win': (overData.winner==null? 'wait': 'lose');\r\n            }\r\n        }\r\n    }\r\n\r\n    calNextPiece(chessboardData) {\r\n        let emptySquares = [];\r\n\r\n        for (let x = 0; x < chessboardData.length; x++) {\r\n            for (let y = 0; y < chessboardData[x].length; y++) {\r\n                if (!chessboardData[x][y]) {\r\n                    emptySquares.push({x,y});\r\n                }\r\n            }\r\n        }\r\n\r\n        return emptySquares[(emptySquares.length*Math.random())|0]\r\n    }\r\n\r\n    putPiece(crood) {\r\n        super.putPiece(crood);\r\n        clearTimeout(this.thinkT);\r\n        this.pieceNeedsToPut = null;\r\n    }\r\n\r\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/game/play/robot-actor.js\n// module id = 54\n// module chunks = 0","import Actor from '../actor.js';\r\n\r\n\r\nexport default class ControlerActor extends Actor {\r\n    init() {\r\n        super.init();\r\n        this.totalTime = 0;\r\n        this.playerTime = {\r\n            'player1': 0,\r\n            'player2': 0\r\n        };\r\n        this.playingPlayer = 'player1';\r\n        this.limitTime = 0;\r\n        this.T;\r\n    }\r\n\r\n    setLimitTime(limitTime) {\r\n        this.limitTime = limitTime;\r\n    }\r\n\r\n    handleStageBoardcast() {\r\n        return {\r\n            setPlaying: (playingActor)=>{\r\n                this.playingPlayer = playingActor.role;\r\n            },\r\n\r\n            lock: ()=>{\r\n                this.stopTick()\r\n            },\r\n\r\n            unlock: ()=>{\r\n                this.stopTick()\r\n                this.startTick()\r\n            },\r\n            gameover: ()=>{\r\n                this.stopTick();\r\n            }\r\n        }\r\n    }\r\n\r\n    makeWidgetData() {\r\n        // 重置 actor 时，需要重置它所使用的 widget, 这里返回的对象，就是用来记录一些 widget 初始状态的数据\r\n        return {\r\n            'total': '00 : 00',\r\n            'left': '00 : 00',\r\n            'right': '00 : 00',\r\n        }\r\n    }\r\n\r\n    reset() {\r\n        super.reset();\r\n        this.totalTime = 0;\r\n        this.playerTime = {\r\n            'player1': 0,\r\n            'player2': 0\r\n        };\r\n    }\r\n\r\n    fillZero(num) {\r\n        if (num < 10) {\r\n            return '0' + num;\r\n        }\r\n        return num;\r\n    }\r\n\r\n    getTimeText(second) {\r\n        let minuteStr = this.fillZero((second / 60) | 0);\r\n        let secondStr = this.fillZero(second % 60);\r\n        return `${minuteStr} : ${secondStr}`;\r\n    }\r\n\r\n    setWidgetData() {\r\n        this.widgetData['total'] = this.getTimeText(this.totalTime);\r\n        this.widgetData['left'] = this.getTimeText(this.playerTime['player1']);\r\n        this.widgetData['right'] = this.getTimeText(this.playerTime['player2']);\r\n    }\r\n\r\n    timeup() {\r\n        this.dispatch('timeup', this.playerTime);\r\n    }\r\n\r\n    startTick() {\r\n        this.T = setInterval(()=>{\r\n            // console.log(this.totalTime);\r\n            this.totalTime += 1;\r\n\r\n            this.playerTime[this.playingPlayer] += 1;\r\n            this.playerTime[(this.playingPlayer==='player1'?'player2':'player1')] = this.totalTime - this.playerTime[this.playingPlayer];\r\n\r\n            this.setWidgetData();\r\n            if (this.totalTime > this.limitTime * 60) {\r\n                this.timeup();\r\n                return;\r\n            }\r\n\r\n        }, 1000);\r\n    }\r\n\r\n    stopTick() {\r\n        clearInterval(this.T);\r\n    }\r\n\r\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/game/play/timekeeper-actor.js\n// module id = 55\n// module chunks = 0","import Game from './game/game.js';\r\nimport View from './view/dom-view/view.js';\r\n\r\nvar view = new View();\r\nvar game = new Game(view);\r\n\r\nview.init();\r\ngame.init();\r\ngame.start();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/main.js\n// module id = 56\n// module chunks = 0"," var msgMap = {\r\n    'black': '黑棋',\r\n    'white': '白棋'\r\n};\r\nexport default msgMap;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/msg-map.js\n// module id = 57\n// module chunks = 0","export default class Page {\r\n    constructor() {\r\n        this.widgets = [];\r\n        this.data;\r\n        this.widgetFactory;\r\n    }\r\n\r\n    init() {\r\n        let WidgetConstructors = this.createWidgetConstructors();\r\n        this.widgetFactory = {\r\n            constructors: WidgetConstructors,\r\n            getWidget: (name)=>{\r\n                return (new WidgetConstructors[name](this));\r\n            }\r\n        }\r\n    }\r\n\r\n    createWidgetConstructors() {\r\n        // 重写此方法，返回包含本 page 要用到的所有 widget 构造函数，用于按需创建 widget\r\n    }\r\n\r\n    createWidget(name) {\r\n        // create widget\r\n        let widget = this.widgetFactory.getWidget(name);\r\n        widget.id = 'widget_' + (new Date).getTime() + (Math.random() * 1000000)|0;\r\n        this.widgets.push(widget);\r\n\r\n        return widget;\r\n    }\r\n\r\n    removeWidget(widget) {\r\n        this.widgets = this.widgets.filter( w => w !== widget );\r\n    }\r\n\r\n    show(data) {\r\n        this.data = data;\r\n    }\r\n\r\n    hide() {\r\n        \r\n    }\r\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/view/base-view/page.js\n// module id = 58\n// module chunks = 0","export default class View {\r\n    constructor() {\r\n        this.pages = {};\r\n    }\r\n    init() { }\r\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/view/base-view/view.js\n// module id = 59\n// module chunks = 0","import {EventEmitter} from 'Src/js/common.js';\r\n\r\nexport default class Widget extends EventEmitter {\r\n    constructor(page) {\r\n        super();\r\n        this.page = page;\r\n        this.widgetData;\r\n        this.watchMethods = this.watch();\r\n    }\r\n\r\n    // 组件初始化\r\n    init() {\r\n\r\n    }\r\n\r\n    watch() {\r\n        // 返回对 widgetData 的每个值的监听函数\r\n        return {};\r\n    }\r\n\r\n    // 更新组件\r\n    setData(data) {\r\n        let that = this;\r\n\r\n        /*for (let key in this.widgetData) {\r\n            this.widgetData.__defineSetter__(key, ()=>{});\r\n            this.widgetData.__defineGetter__(key, ()=>{});\r\n        }*/\r\n\r\n        this.widgetData = data;\r\n\r\n        // 为新的 widgetData 设置 setter 监听\r\n        for (let key in data) {\r\n            data['____' + key] = data[key];\r\n            data.__defineSetter__(key, function(val){\r\n                that.watchMethods['*'] && that.watchMethods['*']();\r\n                that.watchMethods[key] && that.watchMethods[key](val);\r\n                this['____' + key] = val;\r\n            });\r\n            data.__defineGetter__(key, function(){ return this['____' + key];});\r\n            this.watchMethods[key] && this.watchMethods[key](data[key]);\r\n        }\r\n    }\r\n\r\n    reset() {}\r\n\r\n    distory() {\r\n        this.page = null;\r\n    }\r\n\r\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/view/base-view/widget.js\n// module id = 60\n// module chunks = 0","import Page from '../page.js';\r\nimport AvatarSelectorWidget from './avatarselector-widget.js';\r\n\r\nexport default class AvatarPage extends Page {\r\n\r\n    createWidgetConstructors() {\r\n        return { AvatarSelector: AvatarSelectorWidget}\r\n    }\r\n\r\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/view/dom-view/avatar/avatar-page.js\n// module id = 61\n// module chunks = 0","import Widget from '../widget.js';\r\n\r\nexport default class AvatarSelectorWidget extends Widget {\r\n    init() {\r\n        this.ePlayer1Avatars = this.page.elem.querySelectorAll('#player1-avatar .avatar');\r\n        this.ePlayer2Avatars = this.page.elem.querySelectorAll('#player2-avatar .avatar');\r\n        this.eSelectOk = this.page.elem.querySelector('#avatar-select-ok');\r\n        \r\n        this.initEvent();\r\n\r\n        this.player1Avatar = 'avatar-1-1';\r\n        this.player2Avatar = 'avatar-2-1';\r\n    }\r\n\r\n    initEvent() {\r\n        [...this.ePlayer1Avatars].forEach((avatar)=>{\r\n            avatar.addEventListener('click', ()=>{ \r\n                [...this.ePlayer1Avatars].forEach(a=>a.classList.remove('selected'));\r\n                avatar.classList.add('selected');\r\n                this.player1Avatar = avatar.dataset.avatar;\r\n            });\r\n        });\r\n\r\n        [...this.ePlayer2Avatars].forEach((avatar)=>{\r\n            avatar.addEventListener('click', ()=>{\r\n                [...this.ePlayer2Avatars].forEach(a=>a.classList.remove('selected'));\r\n                avatar.classList.add('selected');\r\n                this.player2Avatar = avatar.dataset.avatar;\r\n            });\r\n        });\r\n\r\n        this.eSelectOk.addEventListener('click', ()=>{\r\n            this.trigger('select-done', {\r\n                player1Avatar: this.player1Avatar,\r\n                player2Avatar: this.player2Avatar\r\n            });\r\n        });\r\n\r\n\r\n    }\r\n\r\n    reset() {\r\n        [...this.ePlayer1Avatars].forEach(a=>a.classList.remove('selected'));\r\n        [...this.ePlayer2Avatars].forEach(a=>a.classList.remove('selected'));\r\n\r\n        this.ePlayer1Avatars[0].classList.add('selected');\r\n        this.ePlayer2Avatars[0].classList.add('selected');\r\n\r\n    }\r\n\r\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/view/dom-view/avatar/avatarselector-widget.js\n// module id = 62\n// module chunks = 0","import Page from '../page.js';\r\nimport SettingWidget from './setting-widget.js';\r\n\r\nexport default class GatePage extends Page {\r\n    createWidgetConstructors() {\r\n        return { Setting: SettingWidget}\r\n    }    \r\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/view/dom-view/gate/gate-page.js\n// module id = 63\n// module chunks = 0","import Widget from '../widget.js';\r\n\r\nexport default class SettingWidget extends Widget {\r\n    init() {\r\n        this.eTime = this.page.elem.querySelectorAll('#gate-time .option');\r\n        this.eMode = this.page.elem.querySelectorAll('#gate-mode .option');\r\n        this.eBack = this.page.elem.querySelector('.back');\r\n        this.initEvent();\r\n\r\n        this.time = 5;\r\n        this.mode = 'duet';\r\n    }\r\n\r\n    initEvent() {\r\n        [...this.eTime].forEach((time)=>{\r\n            time.addEventListener('click', ()=>{ \r\n                [...this.eTime].forEach(t=>t.classList.remove('selected'));\r\n                time.classList.add('selected');\r\n                this.time = time.dataset.time;\r\n            });\r\n        });\r\n\r\n        [...this.eMode].forEach((mode)=>{\r\n            mode.addEventListener('click', ()=>{\r\n                this.mode = mode.dataset.mode;\r\n                this.settingDone();\r\n            });\r\n        });\r\n        this.eBack.addEventListener('click', ()=>{\r\n            this.trigger('back');\r\n        });\r\n    }\r\n\r\n    reset(){\r\n        [...this.eTime].forEach((t)=>{\r\n            t.classList.remove('selected');\r\n        });\r\n        this.time = 5;\r\n        this.eTime[0].classList.add('selected');\r\n    }\r\n\r\n\r\n    settingDone() {\r\n        this.trigger('setting-done', {\r\n            time: this.time,\r\n            mode: this.mode\r\n        });\r\n    }\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/view/dom-view/gate/setting-widget.js\n// module id = 64\n// module chunks = 0","import Widget from '../widget.js';\r\n\r\nexport default class ChessboardWidget extends Widget {\r\n    init() {\r\n        this.horizontal;\r\n        this.vertical;\r\n        this.eChessboard = this.page.elem.querySelector('.chessboard');\r\n        this.squares;\r\n        this.initEvent();\r\n    }\r\n    watch() {\r\n        return {\r\n            forbidden: (forbidden)=>{\r\n                if (forbidden) {\r\n                    this.eChessboard.classList.add('forbidden');\r\n                } else {\r\n                    this.eChessboard.classList.remove('forbidden');\r\n                }\r\n            }\r\n        }\r\n    }\r\n    createSquares(horizontal, vertical) {\r\n        this.horizontal = horizontal; // 格子个数\r\n        this.vertical = horizontal; // 格子个数\r\n        let squaresHTML = new Array(this.horizontal*this.vertical).fill(1)\r\n                            .map(a=>`<div class=\"square\"><i></i></div>`).join('');\r\n        this.eChessboard.innerHTML = squaresHTML;\r\n        this.squares = this.eChessboard.querySelectorAll('.square');\r\n        [...this.squares].forEach((s,i)=>{\r\n            s.dataset.crood = `${(i%this.vertical)},${(i/this.horizontal)|0}`;\r\n        });\r\n    }\r\n\r\n    initEvent() {\r\n        this.eChessboard.addEventListener('click', (e)=>{\r\n            if (this.widgetData.forbidden||!e.target.parentNode.classList.contains('square')) {\r\n                return;\r\n            } \r\n\r\n            let square = e.target.parentNode;\r\n            let crood = square.dataset.crood.split(',');\r\n\r\n            if (square.classList.contains('black') || square.classList.contains('white')) {\r\n                return;\r\n            }\r\n            this.trigger('square-click', {x: crood[0], y: crood[1]});\r\n        });\r\n    }\r\n\r\n    setSquare(pieceType, crood) {\r\n        let square = this.squares[Number(crood.x) + crood.y * this.horizontal];\r\n\r\n        square.classList.remove('black','white');\r\n        pieceType && square.classList.add(pieceType);\r\n    }\r\n\r\n    setActivePiece(pieceType) {\r\n        this.eChessboard.classList.remove('playing-black','playing-white')\r\n        this.eChessboard.classList.add('playing-'+pieceType);\r\n    }\r\n\r\n    clearChessboard() {\r\n        // 清空棋盘\r\n        [...this.squares].forEach(s=>s.className='square');\r\n    }\r\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/view/dom-view/play/chessboard-widget.js\n// module id = 65\n// module chunks = 0","import Widget from '../widget.js';\r\n\r\nexport default class ControlerWidget extends Widget {\r\n    init() {\r\n        this.eConfirm = this.page.elem.querySelector('.confirm');\r\n        this.eConfirmMsg = this.eConfirm.querySelector('.confirm-msg');\r\n\r\n        this.eConfirmHandle = this.eConfirm.querySelector('.confirm-handle');\r\n        this.eConfirmYesBtn = this.eConfirm.querySelector('.confirm-yes');\r\n        this.eConfirmNoBtn = this.eConfirm.querySelector('.confirm-no');\r\n\r\n\r\n        this.eGameover = this.page.elem.querySelector('.gameover');\r\n        this.eGameoverMsg = this.eGameover.querySelector('.gameover-msg');\r\n        this.eGameoverRestart = this.eGameover.querySelector('.restart');\r\n        this.eGameoverBack = this.eGameover.querySelector('.back');\r\n\r\n        this.confirmCallback;\r\n        this.refuseCallback;\r\n\r\n        this.initEvent();\r\n    }\r\n\r\n    initEvent() {\r\n        this.eConfirmYesBtn.addEventListener('click', ()=>{\r\n            this.eConfirm.classList.remove('show');\r\n            this.confirmCallback();\r\n        });\r\n\r\n        this.eConfirmNoBtn.addEventListener('click', ()=>{\r\n            this.eConfirm.classList.remove('show');\r\n            this.refuseCallback();\r\n        });\r\n\r\n        this.eGameoverRestart.addEventListener('click', ()=>{\r\n            this.eGameover.classList.remove('show');\r\n            this.trigger('restart');\r\n        });\r\n\r\n        this.eGameoverBack.addEventListener('click', ()=>{\r\n            this.eGameover.classList.remove('show');\r\n            this.trigger('back');\r\n        });\r\n\r\n    }\r\n\r\n    showMsg(msg, dur, callback) {\r\n        this.eConfirmHandle.classList.remove('show');\r\n        this.eConfirmMsg.innerHTML = msg;\r\n\r\n        this.eConfirm.classList.add('show');\r\n\r\n        setTimeout(()=>{\r\n            callback();\r\n            this.eConfirm.classList.remove('show');\r\n        }, dur);\r\n    }\r\n\r\n    showConfirm(msg, confirmCallback, refuseCallback, confirmText, refuseText) {\r\n        this.eConfirmHandle.classList.add('show');\r\n        this.eConfirmYesBtn.innerHTML = confirmText;\r\n        this.eConfirmNoBtn.innerHTML = refuseText;\r\n        this.eConfirmMsg.innerHTML = msg;\r\n\r\n        this.confirmCallback = confirmCallback;\r\n        this.refuseCallback = refuseCallback;\r\n\r\n        this.eConfirm.classList.add('show');\r\n    }\r\n\r\n    showGameoverMsg(msg) {\r\n        this.eGameoverMsg.innerHTML = msg;\r\n        this.eGameover.classList.add('show');\r\n    }\r\n\r\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/view/dom-view/play/controler-widget.js\n// module id = 66\n// module chunks = 0","import Page from '../page.js';\r\nimport ChessboardWidget from './chessboard-widget.js';\r\nimport TimekeeperWidget from './timekeeper-widget.js';\r\nimport PlayerWidget from './player-widget.js';\r\nimport ControlerWidget from './controler-widget.js';\r\n\r\nexport default class PlayPage extends Page {\r\n    createWidgetConstructors() {\r\n        return {\r\n            Chessboard: ChessboardWidget,\r\n            Timekeeper: TimekeeperWidget,\r\n            Player: PlayerWidget,\r\n            Robot: PlayerWidget,\r\n            Controler: ControlerWidget\r\n        }\r\n    }  \r\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/view/dom-view/play/play-page.js\n// module id = 67\n// module chunks = 0","import Widget from '../widget.js';\r\n\r\nexport default class PlayerWidget extends Widget {\r\n    init(role, isRobot) {\r\n        this.role = role;\r\n        this.isRobot = isRobot;\r\n\r\n        let template = this.page.elem.querySelector('#play-player-template').innerHTML;\r\n        let eDiv = document.createElement('div');\r\n        eDiv.innerHTML = template;\r\n\r\n        this.ePlayer = eDiv.querySelector('div');\r\n        this.ePlayer.classList.add(role);\r\n        isRobot && this.ePlayer.classList.add('robot');\r\n\r\n        this.avatar = this.ePlayer.querySelector('.avatar');\r\n\r\n        this.page.elem.appendChild(this.ePlayer);\r\n        this.initEvent();\r\n    }\r\n\r\n    initEvent() {\r\n        let thisWidget = this;\r\n\r\n        if (this.isRobot) {\r\n            this.ePlayer.removeChild(this.ePlayer.querySelector('.player-handle'));\r\n            return;\r\n        }\r\n\r\n        let undoBtn = this.ePlayer.querySelector('.undo-btn');\r\n        let giveinBtn = this.ePlayer.querySelector('.givein-btn');\r\n        let askdrawBtn = this.ePlayer.querySelector('.askdraw-btn');\r\n\r\n        undoBtn.addEventListener('click', function() {\r\n            if (this.classList.contains('disabled')) {\r\n                return;\r\n            }\r\n            let eventName = 'undo';\r\n            \r\n            if (this.classList.contains('undoundo')) {\r\n                eventName = 'undoundo'\r\n            }\r\n            thisWidget.trigger(eventName);\r\n        });\r\n\r\n        giveinBtn.addEventListener('click', function() {\r\n            thisWidget.trigger('giveIn');\r\n        });\r\n\r\n        askdrawBtn.addEventListener('click', function() {\r\n            thisWidget.trigger('askDraw');\r\n        });\r\n    } \r\n\r\n    watch() {\r\n        return {\r\n            avatar: (avatar)=>{\r\n                this.avatar.className = 'avatar ' + avatar;\r\n                this.ePlayer.className = this.ePlayer.className.replace(/bg\\-avatar\\S*?/g, '');\r\n                this.ePlayer.classList.add('bg-' + avatar);\r\n            },\r\n            pieceType: (pieceType)=>{\r\n                let ePiece = this.ePlayer.querySelector('.piece');\r\n                ePiece.classList.remove('white', 'black');\r\n                ePiece.classList.add(pieceType);\r\n            },\r\n            undoState: (undoState)=>{\r\n                if (this.isRobot) return;\r\n                let undoBtn = this.ePlayer.querySelector('.undo-btn');\r\n                // disabled //undoundo // undo\r\n                undoBtn.classList.remove('disabled', 'undo', 'undoundo');\r\n                undoBtn.innerHTML =  undoState === 'undoundo'? '撤销悔棋': '悔棋';\r\n                undoBtn.classList.add(undoState);\r\n            },\r\n            playerState: (playerState)=>{\r\n                this.ePlayer.classList.remove('playing', 'wait', 'lose', 'win');\r\n                this.ePlayer.classList.add(playerState);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    distory() {\r\n        super.distory();\r\n        this.ePlayer.parentNode.removeChild(this.ePlayer);\r\n\r\n        // todo 事件解绑\r\n    }\r\n\r\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/view/dom-view/play/player-widget.js\n// module id = 68\n// module chunks = 0","import Widget from '../widget.js';\r\n\r\nexport default class TimekeeperWidget extends Widget {\r\n    init() {\r\n        this.eLeft = this.page.elem.querySelector('.time-left');\r\n        this.eTotal = this.page.elem.querySelector('.time-total');\r\n        this.eRight = this.page.elem.querySelector('.time-right');\r\n    }\r\n\r\n    watch() {\r\n        return {\r\n            'left': ()=>{this.eLeft.innerHTML = this.widgetData.left;},\r\n            'right': ()=>{this.eRight.innerHTML = this.widgetData.right;},\r\n            'total': ()=>{\r\n                this.eTotal.innerHTML = this.widgetData.total;\r\n            }\r\n        }\r\n    }\r\n\r\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/view/dom-view/play/timekeeper-widget.js\n// module id = 69\n// module chunks = 0"],"sourceRoot":""}