{"version":3,"sources":["webpack:///webpack/bootstrap 05981a2832cb62336655","webpack:///./index.js"],"names":["Point","radius","color","Math","random","join","prevCrood","ctx","croods2D","position","clone","moveTo","x","y","arc","scale","yScale","PI","F3","Obj","Effect","renderer","scene","cvs","xOffset","waveHeight","waveWidth","col","colPointNum","flyTime","timePass","scaleStep","pointGroup","add","resize","width","height","init","stepWidth","setPosition","setRotation","point","count","z","initPos","Vector3","flyDelay","delta","flyPecent","cos","sin","children","rotation","setScale","addTick","update","render","Time","EffectRander","beginPath","fillStyle","fill","Renderer","window","bannerInit","getContext","Scene","effect","perspective","origin","p","animate","TIME","start"],"mappings":"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","file":"entry.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 05981a2832cb62336655","// import * as F3 from './f3/f3.js'\n\nclass Point extends F3.Obj {\n    constructor(radius=5) {\n        super();\n        this.radius = radius;\n        this.color = 'rgba('+[Math.random()*255|0,Math.random()*255|0,Math.random()*255|0, Math.random()].join(',')+')';\n        this.prevCrood = null;\n    }\n    render(ctx) {\n        this.prevCrood = this.prevCrood || this.croods2D.position.clone();\n\n        // ctx.fillStyle = this.color;\n        // ctx.beginPath();\n\n\n        // console.log(\n        //     this.croods2D.position.x, \n        //     this.croods2D.position.y,\n        //     this.radius * this.croods2D.scale + 1, \n        //     this.radius * this.croods2D.scale + 1\n        // );\n\n        // if (this.croods2D.scale < 5)\n        /*ctx.fillStyle = '#fff'\n        ctx.fillRect(\n            this.croods2D.position.x, \n            this.croods2D.position.y,\n            this.radius * this.croods2D.scale * this.yScale, \n            this.radius * this.croods2D.scale * this.yScale\n        );*/\n\n        // ctx.beginPath();\n        ctx.moveTo(\n            this.croods2D.position.x, \n            this.croods2D.position.y\n        );\n        ctx.arc(\n            this.croods2D.position.x, \n            this.croods2D.position.y, \n            this.radius * this.croods2D.scale * this.yScale, 0, Math.PI * 2);\n        // ctx.fill();\n\n        // ctx.strokeStyle = this.color;\n        // ctx.lineWidth = this.radius * this.zScale;\n        // ctx.lineCap = \"round\";\n        // ctx.beginPath();\n        // ctx.moveTo(this.croods2D.position.x, this.croods2D.position.y);\n        // ctx.lineTo(this.prevCrood.x, this.prevCrood.y);\n        // ctx.stroke();\n        this.prevCrood = this.croods2D.position.clone();\n    }\n}\n\nclass Effect extends F3.Time {\n    constructor(renderer, scene, cvs) {\n        super();\n        this.renderer = renderer;\n        this.scene = scene;\n        this.cvs = cvs;\n        \n        this.xOffset = 0;\n        this.waveHeight = 0.4; // 波高\n        this.waveWidth = 8; // 波长\n\n        this.col = 30;\n        this.colPointNum = 30;\n        \n        this.flyTime = 3000;\n        this.timePass = 0;\n\n        this.scale = 1;\n        this.scaleStep = 0.01;\n\n        this.pointGroup = new F3.Obj();\n        this.scene.add(this.pointGroup);\n\n        this.resize(cvs.width, cvs.height);\n        this.init();\n    }\n    resize(width, height) {\n        this.cvs.width = width;\n        this.cvs.height = height;\n        // this.pointGroup.position.set(this.cvs.width/2, this.cvs.height, 0);\n        this.stepWidth = width * 1.8 / this.col;\n        this.pointGroup.setPosition(this.cvs.width/2, this.cvs.height * 1.2, -this.col * this.stepWidth/2);\n        this.pointGroup.setRotation(0.1, 0, 0);\n        // this.waveHeight = height/2;\n        // this.waveWidth = this.waveHeight * 4;\n        // console.log(this.stepWidth);\n    }\n    init() {\n        // create point\n        var point;\n        for (let x = -(this.col - 1) / 2, count = 0; x <= (this.col - 1) / 2; x++) {\n            for (let z = -(this.colPointNum-1) / 2; z <= (this.colPointNum-1) / 2 ; z++ ) {    \n                point = new Point(2);\n                this.pointGroup.add(point);\n                point.initPos = new F3.Vector3(\n                     x + Math.random() * -2 + 1,\n                     -20 + -10 * Math.random(),\n                     z + Math.random() * -2 + 1\n                );\n                point.flyDelay = Math.random() * 2000 | 0;\n            }\n        }\n    }\n    update(delta) {\n        this.timePass += delta;\n        this.xOffset = this.timePass / 2000;\n\n        let point;\n        let flyPecent;\n        \n        for (let x = -(this.col - 1) / 2, count = 0; x <= (this.col - 1) / 2; x++) {\n            for (let z = -(this.colPointNum-1) / 2; z <= (this.colPointNum-1) / 2 ; z++ ) {    \n\n                let y = Math.cos(x*Math.PI/this.waveWidth + this.xOffset)*Math.sin(z*Math.PI/this.waveWidth + this.xOffset) * this.waveHeight;\n                \n\n\n                point = this.pointGroup.children[count]\n                point.yScale = (-y + 0.6)/(this.waveHeight) * 1.5;\n\n                flyPecent = (this.timePass-point.flyDelay) / this.flyTime;\n                flyPecent = flyPecent > 1 ? 1: (flyPecent < 0? 0: flyPecent);\n\n                point.setPosition(\n                    (x + (point.initPos.x - x) * (1-flyPecent)) * this.stepWidth,\n                    (y + (point.initPos.y - y) * (1-flyPecent)) * this.stepWidth,\n                    (z + (point.initPos.z - z) * (1-flyPecent)) * this.stepWidth\n                );\n                count++;\n            }\n        }\n        if (this.timePass > this.flyTime)\n        this.pointGroup.setRotation(\n            this.pointGroup.rotation.x +0.0000,\n            this.pointGroup.rotation.y +0.0002,\n            this.pointGroup.rotation.z +0.000   \n        );\n\n        if (this.scale >= 1.2) {\n            this.scaleStep = -0.001;\n        } else if (this.scale <= 1) {\n            this.scaleStep = 0.001;\n        }\n        this.scale += this.scaleStep;\n        // console.log(this.scale, this.scaleStep);\n        this.pointGroup.setScale(this.scale, this.scale, this.scale);\n    }\n    animate() {\n        this.addTick((delta)=>{\n            this.update(delta);\n            this.renderer.render(this.scene);\n        });\n    }\n}\n\nclass EffectRander extends F3.Renderer {\n    constructor(ctx, cvs) {\n        super(ctx, cvs);\n    }\n    beforeRender() {\n        super.beforeRender();\n        this.ctx.beginPath();\n    }\n    afterRender() {\n        this.ctx.fillStyle = \"#fff\";\n        this.ctx.fill();\n    }\n}\n\nwindow.bannerInit = function(cvs) {\n    let ctx = cvs.getContext('2d');\n\n    let scene = new F3.Scene()\n    let renderer = new EffectRander(ctx, cvs);\n    let effect = new Effect(renderer, scene, cvs);\n    F3.perspective.origin = new F3.Vector3(cvs.width/2, cvs.height/1.6);\n    F3.perspective.p = 800;\n    effect.animate();\n\n    F3.TIME.start();\n}\n\n\n\n// WEBPACK FOOTER //\n// ./index.js"],"sourceRoot":""}